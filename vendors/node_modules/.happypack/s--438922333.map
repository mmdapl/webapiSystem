{"version":3,"sources":["client\\reducer\\modules\\news.js"],"names":["fetchNewsData","fetchMoreNews","getMockUrl","fetchUpdateLogData","FETCH_NEWS_DATA","FETCH_MORE_NEWS","initialState","newsData","list","total","curpage","state","action","type","payload","data","sort","a","b","add_time","push","length","typeid","page","limit","selectValue","param","variable","PAGE_LIMIT","axios","get","params","project_id","id","post"],"mappings":"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","file":"news.js","sourceRoot":"C:/Users/DUOYI/Desktop/api/test/vendors","sourcesContent":["// Actions\nconst FETCH_NEWS_DATA = 'yapi/news/FETCH_NEWS_DATA';\nconst FETCH_MORE_NEWS = 'yapi/news/FETCH_MORE_NEWS';\n// Reducer\nconst initialState = {\n  newsData: {\n    list: [],\n    total: 0\n  },\n  curpage: 1\n};\n\nexport default (state = initialState, action) => {\n  switch (action.type) {\n    case FETCH_NEWS_DATA: {\n      const list = action.payload.data.data.list;\n      state.newsData.list = list;\n      state.curpage = 1;\n      state.newsData.list.sort(function(a, b) {\n        return b.add_time - a.add_time;\n      });\n      return {\n        ...state,\n        newsData: {\n          total: action.payload.data.data.total,\n          list: state.newsData.list\n        }\n      };\n    }\n    case FETCH_MORE_NEWS: {\n      const list = action.payload.data.data.list;\n      state.newsData.list.push(...list);\n      state.newsData.list.sort(function(a, b) {\n        return b.add_time - a.add_time;\n      });\n      if (list && list.length) {\n        state.curpage++;\n      }\n      return {\n        ...state,\n        newsData: {\n          total: action.payload.data.data.total,\n          list: state.newsData.list\n        }\n      };\n    }\n    default:\n      return state;\n  }\n};\n\n// Action Creators\nimport axios from 'axios';\nimport variable from '../../constants/variable';\n\nexport function fetchNewsData(typeid, type, page, limit, selectValue) {\n  let param = {\n    typeid: typeid,\n    type: type,\n    page: page,\n    limit: limit ? limit : variable.PAGE_LIMIT,\n    selectValue\n  }\n\n  return {\n    type: FETCH_NEWS_DATA,\n    payload: axios.get('/api/log/list', {\n      params: param\n    })\n  };\n}\nexport function fetchMoreNews(typeid, type, page, limit, selectValue) {\n  const param = {\n    typeid: typeid,\n    type: type,\n    page: page,\n    limit: limit ? limit : variable.PAGE_LIMIT,\n    selectValue\n  }\n  return {\n    type: FETCH_MORE_NEWS,\n    payload: axios.get('/api/log/list', {\n      params: param\n    })\n  };\n}\n\nexport function getMockUrl(project_id) {\n  const params = { id: project_id };\n  return {\n    type: '',\n    payload: axios.get('/api/project/get', { params: params })\n  };\n}\n\nexport function fetchUpdateLogData(params) {\n  return {\n    type: '',\n    payload: axios.post('/api/log/list_by_update', params)\n  };\n}\n"]}