{"version":3,"sources":["client\\containers\\Project\\Interface\\InterfaceList\\AddInterfaceForm.js"],"names":["HTTP_METHOD","constants","HTTP_METHOD_KEYS","FormItem","Item","Option","hasErrors","fieldsError","some","field","AddInterfaceForm","handleSubmit","e","preventDefault","props","form","validateFields","err","values","onSubmit","resetFields","handlePath","val","target","value","setFieldsValue","path","render","getFieldDecorator","getFieldsError","prefixSelector","initialValue","width","map","item","formItemLayout","labelCol","xs","span","sm","wrapperCol","catid","catdata","_id","name","rules","required","message","color","offset","onCancel","marginRight","Component","propTypes","PropTypes","object","func","number","array","create"],"mappings":"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","file":"AddInterfaceForm.js","sourceRoot":"C:/Users/DUOYI/Desktop/api/test/vendors","sourcesContent":["import React, { PureComponent as Component } from 'react'\nimport PropTypes from 'prop-types'\nimport { Form, Input, Select, Button } from 'antd';\n\nimport constants from '../../../../constants/variable.js'\nimport { handleApiPath, nameLengthLimit } from '../../../../common.js'\nconst HTTP_METHOD = constants.HTTP_METHOD;\nconst HTTP_METHOD_KEYS = Object.keys(HTTP_METHOD);\n\nconst FormItem = Form.Item;\nconst Option = Select.Option;\nfunction hasErrors(fieldsError) {\n  return Object.keys(fieldsError).some(field => fieldsError[field]);\n}\n\n\nclass AddInterfaceForm extends Component {\n  static propTypes = {\n    form: PropTypes.object,\n    onSubmit: PropTypes.func,\n    onCancel: PropTypes.func,\n    catid: PropTypes.number,\n    catdata: PropTypes.array\n  }\n  handleSubmit = (e) => {\n    e.preventDefault();\n    this.props.form.validateFields((err, values) => {\n      if (!err) {\n        this.props.onSubmit(values, () => {\n          this.props.form.resetFields();\n        });\n\n      }\n    });\n  }\n\n  handlePath = (e) => {\n    let val = e.target.value\n    this.props.form.setFieldsValue({\n      path: handleApiPath(val)\n    })\n  }\n  render() {\n    const { getFieldDecorator, getFieldsError } = this.props.form;\n    const prefixSelector = getFieldDecorator('method', {\n      initialValue: 'GET'\n    })(\n      <Select style={{ width: 75 }}>\n        {HTTP_METHOD_KEYS.map(item => {\n          return <Option key={item} value={item}>{item}</Option>\n        })}\n      </Select>\n      );\n    const formItemLayout = {\n      labelCol: {\n        xs: { span: 24 },\n        sm: { span: 6 }\n      },\n      wrapperCol: {\n        xs: { span: 24 },\n        sm: { span: 14 }\n      }\n    };\n\n\n    return (\n\n      <Form onSubmit={this.handleSubmit}>\n        <FormItem\n          {...formItemLayout}\n          label=\"接口分类\"\n        >\n          {getFieldDecorator('catid', {\n            initialValue: this.props.catid ? this.props.catid + '' : this.props.catdata[0]._id + ''\n          })(\n            <Select>\n              {this.props.catdata.map(item => {\n                return <Option key={item._id} value={item._id + \"\"}>{item.name}</Option>\n              })}\n            </Select>\n            )}\n        </FormItem>\n        <FormItem\n          {...formItemLayout}\n          label=\"接口名称\"\n        >\n          {getFieldDecorator('title', {\n            rules: nameLengthLimit('接口')\n          })(\n            <Input placeholder=\"接口名称\" />\n            )}\n        </FormItem>\n\n        <FormItem\n          {...formItemLayout}\n          label=\"接口路径\"\n        >\n          {getFieldDecorator('path', {\n            rules: [{\n              required: true, message: '请输入接口路径!'\n            }]\n          })(\n            <Input onBlur={this.handlePath} addonBefore={prefixSelector} placeholder=\"/path\" />\n            )}\n        </FormItem>\n        <FormItem\n          {...formItemLayout}\n          label=\"注\"\n        >\n          <span style={{ color: \"#929292\" }}>详细的接口数据可以在编辑页面中添加</span>\n        </FormItem>\n        <FormItem className=\"catModalfoot\" wrapperCol={{ span: 24, offset: 8 }} >\n          <Button onClick={this.props.onCancel} style={{ marginRight: \"10px\" }}  >取消</Button>\n          <Button\n            type=\"primary\"\n            htmlType=\"submit\"\n            disabled={hasErrors(getFieldsError())}\n          >\n            提交\n          </Button>\n        </FormItem>\n\n      </Form>\n\n    );\n  }\n}\n\nexport default Form.create()(AddInterfaceForm);\n"]}