'use strict';

exports.__esModule = true;

var _alert = require('antd/lib/alert');

var _alert2 = _interopRequireDefault(_alert);

var _react = require('react');

var _react2 = _interopRequireDefault(_react);

var _propTypes = require('prop-types');

var _propTypes2 = _interopRequireDefault(_propTypes);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

exports.initCrossRequest = function (fn) {
  var startTime = 0;
  var _crossRequest = setInterval(function () {
    startTime += 500;
    if (startTime > 5000) {
      clearInterval(_crossRequest);
    }
    if (window.crossRequest) {
      clearInterval(_crossRequest);
      fn(true);
    } else {
      fn(false);
    }
  }, 500);
  return _crossRequest;
};

CheckCrossInstall.propTypes = {
  hasPlugin: _propTypes2.default.bool
};

function CheckCrossInstall(props) {
  var hasPlugin = props.hasPlugin;
  return _react2.default.createElement(
    'div',
    { className: hasPlugin ? null : 'has-plugin' },
    hasPlugin ? '' : _react2.default.createElement(_alert2.default, {
      message: _react2.default.createElement(
        'div',
        null,
        '\u91CD\u8981\uFF1A\u5F53\u524D\u7684\u63A5\u53E3\u6D4B\u8BD5\u670D\u52A1\uFF0C\u9700\u5B89\u88C5\u514D\u8D39\u6D4B\u8BD5\u589E\u5F3A\u63D2\u4EF6,\u4EC5\u652F\u6301 chrome \u6D4F\u89C8\u5668\uFF0C\u9009\u62E9\u4E0B\u9762\u4EFB\u610F\u4E00\u79CD\u5B89\u88C5\u65B9\u5F0F\uFF1A',
        _react2.default.createElement(
          'div',
          null,
          _react2.default.createElement(
            'a',
            {
              target: 'blank',
              href: 'https://chrome.google.com/webstore/detail/cross-request/cmnlfmgbjmaciiopcgodlhpiklaghbok?hl=en-US'
            },
            '[Google \u5546\u5E97\u83B7\u53D6\uFF08\u9700\u7FFB\u5899]'
          )
        ),
        _react2.default.createElement(
          'div',
          null,
          _react2.default.createElement(
            'a',
            { target: 'blank', href: '/api/interface/download_crx' },
            ' ',
            '[\u624B\u52A8\u4E0B\u8F7D]',
            ' '
          ),
          _react2.default.createElement(
            'span',
            null,
            ' zip \u6587\u4EF6\u89E3\u538B\u540E\u5C06 crx \u6587\u4EF6\u62D6\u5165\u5230 chrome://extensions/ '
          ),
          _react2.default.createElement(
            'a',
            { target: 'blank', href: 'http://www.jianshu.com/p/12ca04c61fc6' },
            ' ',
            '[\u8BE6\u7EC6\u5B89\u88C5\u6559\u7A0B]',
            ' '
          )
        )
      ),
      type: 'warning'
    })
  );
}

exports.default = CheckCrossInstall;