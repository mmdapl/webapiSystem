{"version":3,"sources":["client\\reducer\\modules\\user.js"],"names":["checkLoginState","loginActions","loginLdapActions","regActions","logoutActions","loginTypeAction","setBreadcrumb","setImageUrl","changeStudyTip","finishStudy","LOGIN","LOGIN_OUT","LOGIN_TYPE","GET_LOGIN_STATE","REGISTER","SET_BREADCRUMB","CHANGE_STUDY_TIP","FINISH_STUDY","SET_IMAGE_URL","LOADING_STATUS","GUEST_STATUS","MEMBER_STATUS","initialState","isLogin","canRegister","isLDAP","userName","uid","email","loginState","loginWrapActiveKey","role","type","breadcrumb","studyTip","study","imageUrl","state","action","payload","data","errcode","ladp","username","_id","index","axios","get","post","password","param"],"mappings":"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","file":"user.js","sourceRoot":"C:/Users/DUOYI/Desktop/api/test/vendors","sourcesContent":["import axios from 'axios';\n\n// Actions\nconst LOGIN = 'yapi/user/LOGIN';\nconst LOGIN_OUT = 'yapi/user/LOGIN_OUT';\nconst LOGIN_TYPE = 'yapi/user/LOGIN_TYPE';\nconst GET_LOGIN_STATE = 'yapi/user/GET_LOGIN_STATE';\nconst REGISTER = 'yapi/user/REGISTER';\nconst SET_BREADCRUMB = 'yapi/user/SET_BREADCRUMB';\nconst CHANGE_STUDY_TIP = 'yapi/user/CHANGE_STUDY_TIP';\nconst FINISH_STUDY = 'yapi/user/FINISH_STUDY';\nconst SET_IMAGE_URL = 'yapi/user/SET_IMAGE_URL';\n\n// Reducer\nconst LOADING_STATUS = 0;\nconst GUEST_STATUS = 1;\nconst MEMBER_STATUS = 2;\n// Reducer user\nconst initialState = {\n  isLogin: false,\n  canRegister: true,\n  isLDAP: false,\n  userName: null,\n  uid: null,\n  email: '',\n  loginState: LOADING_STATUS,\n  loginWrapActiveKey: '1',\n  role: '',\n  type: '',\n  // breadcrumb: [{\n  //   name: 'name',\n  //   href: 'group'\n  // }, {\n  //   name: '当前页面'\n  // }]\n  breadcrumb: [],\n  studyTip: 0,\n  study: false,\n  imageUrl: ''\n};\n\nexport default (state = initialState, action) => {\n  switch (action.type) {\n    case GET_LOGIN_STATE: {\n      return {\n        ...state,\n        isLogin: action.payload.data.errcode == 0,\n        isLDAP: action.payload.data.ladp,\n        canRegister: action.payload.data.canRegister,\n        role: action.payload.data.data ? action.payload.data.data.role : null,\n        loginState: action.payload.data.errcode == 0 ? MEMBER_STATUS : GUEST_STATUS,\n        userName: action.payload.data.data ? action.payload.data.data.username : null,\n        uid: action.payload.data.data ? action.payload.data.data._id : null,\n        type: action.payload.data.data ? action.payload.data.data.type : null,\n        study: action.payload.data.data ? action.payload.data.data.study : false\n      };\n    }\n    case LOGIN: {\n      if (action.payload.data.errcode === 0) {\n        return {\n          ...state,\n          isLogin: true,\n          loginState: MEMBER_STATUS,\n          uid: action.payload.data.data.uid,\n          userName: action.payload.data.data.username,\n          role: action.payload.data.data.role,\n          type: action.payload.data.data.type,\n          study: action.payload.data.data.study\n        };\n      } else {\n        return state;\n      }\n    }\n    case LOGIN_OUT: {\n      return {\n        ...state,\n        isLogin: false,\n        loginState: GUEST_STATUS,\n        userName: null,\n        uid: null,\n        role: '',\n        type: ''\n      };\n    }\n    case LOGIN_TYPE: {\n      return {\n        ...state,\n        loginWrapActiveKey: action.index\n      };\n    }\n    case REGISTER: {\n      return {\n        ...state,\n        isLogin: true,\n        loginState: MEMBER_STATUS,\n        uid: action.payload.data.data.uid,\n        userName: action.payload.data.data.username,\n        type: action.payload.data.data.type,\n        study: action.payload.data.data ? action.payload.data.data.study : false\n      };\n    }\n    case SET_BREADCRUMB: {\n      return {\n        ...state,\n        breadcrumb: action.data\n      };\n    }\n    case CHANGE_STUDY_TIP: {\n      return {\n        ...state,\n        studyTip: state.studyTip + 1\n      };\n    }\n    case FINISH_STUDY: {\n      return {\n        ...state,\n        study: true,\n        studyTip: 0\n      };\n    }\n    case SET_IMAGE_URL: {\n      // console.log('state', state);\n      return {\n        ...state,\n        imageUrl: action.data\n      };\n    }\n    default:\n      return state;\n  }\n};\n\n// Action Creators\nexport function checkLoginState() {\n  return {\n    type: GET_LOGIN_STATE,\n    payload: axios.get('/api/user/status')\n  };\n}\n\nexport function loginActions(data) {\n  return {\n    type: LOGIN,\n    payload: axios.post('/api/user/login', data)\n  };\n}\n\nexport function loginLdapActions(data) {\n  return {\n    type: LOGIN,\n    payload: axios.post('/api/user/login_by_ldap', data)\n  };\n}\n\nexport function regActions(data) {\n  const { email, password, userName } = data;\n  const param = {\n    email,\n    password,\n    username: userName\n  };\n  return {\n    type: REGISTER,\n    payload: axios.post('/api/user/reg', param)\n  };\n}\n\nexport function logoutActions() {\n  return {\n    type: LOGIN_OUT,\n    payload: axios.get('/api/user/logout')\n  };\n}\n\nexport function loginTypeAction(index) {\n  return {\n    type: LOGIN_TYPE,\n    index\n  };\n}\n\nexport function setBreadcrumb(data) {\n  return {\n    type: SET_BREADCRUMB,\n    data\n  };\n}\n\nexport function setImageUrl(data) {\n  return {\n    type: SET_IMAGE_URL,\n    data\n  };\n}\n\nexport function changeStudyTip() {\n  return {\n    type: CHANGE_STUDY_TIP\n  };\n}\n\nexport function finishStudy() {\n  return {\n    type: FINISH_STUDY,\n    payload: axios.get('/api/user/up_study')\n  };\n}\n"]}