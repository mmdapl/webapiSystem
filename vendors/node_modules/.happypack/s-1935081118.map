{"version":3,"sources":["client\\containers\\Project\\Setting\\ProjectMessage\\ProjectTag.js"],"names":["ProjectTag","props","addHeader","val","index","name","label","newValue","concat","state","nextData","data","desc","setState","delHeader","key","curValue","filter","handleChange","tag","initState","curdata","length","forEach","unshift","item","componentDidMount","handleInit","tagMsg","render","commonTpl","e","target","value","width","marginRight","stopPropagation","map","Component","propTypes","PropTypes","array","tagSubmit","func"],"mappings":"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","file":"ProjectTag.js","sourceRoot":"C:/Users/DUOYI/Desktop/api/test/vendors","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Icon, Row, Col, Input } from 'antd';\nimport './ProjectTag.scss';\n\n\nclass ProjectTag extends Component {\n  static propTypes = {\n    tagMsg: PropTypes.array,\n    tagSubmit: PropTypes.func\n  };\n  constructor(props) {\n    super(props);\n    this.state = {\n      tag: [{ name: '', desc: '' }]\n    };\n  }\n\n  initState(curdata) {\n    let tag = [\n      {\n        name: '',\n        desc: ''\n      }\n    ];\n    if (curdata && curdata.length !== 0) {\n      curdata.forEach(item => {\n        tag.unshift(item);\n      });\n    }\n\n    return { tag };\n  }\n  componentDidMount() {\n    this.handleInit(this.props.tagMsg);\n  }\n\n  handleInit(data) {\n    let newValue = this.initState(data);\n    this.setState({ ...newValue });\n  }\n\n  addHeader = (val, index, name, label) => {\n    let newValue = {};\n    newValue[name] = [].concat(this.state[name]);\n    newValue[name][index][label] = val;\n    let nextData = this.state[name][index + 1];\n    if (!(nextData && typeof nextData === 'object')) {\n      let data = { name: '', desc: '' };\n      newValue[name] = [].concat(this.state[name], data);\n    }\n    this.setState(newValue);\n  };\n\n  delHeader = (key, name) => {\n    let curValue = this.state[name];\n    let newValue = {};\n    newValue[name] = curValue.filter((val, index) => {\n      return index !== key;\n    });\n    this.setState(newValue);\n  };\n\n  handleChange = (val, index, name, label) => {\n    let newValue = this.state;\n    newValue[name][index][label] = val;\n    this.setState(newValue);\n  };\n\n  render() {\n    const commonTpl = (item, index, name) => {\n      const length = this.state[name].length - 1;\n      return (\n        <Row key={index} className=\"tag-item\">\n          <Col span={6} className=\"item-name\">\n            <Input\n              placeholder={`请输入 ${name} 名称`}\n              // style={{ width: '200px' }}\n              value={item.name || ''}\n              onChange={e => this.addHeader(e.target.value, index, name, 'name')}\n            />\n          </Col>\n          <Col span={12}>\n            <Input\n              placeholder=\"请输入tag 描述信息\"\n              style={{ width: '90%', marginRight: 8 }}\n              onChange={e => this.handleChange(e.target.value, index, name, 'desc')}\n              value={item.desc || ''}\n            />\n          </Col>\n          <Col span={2} className={index === length ? ' tag-last-row' : null}>\n            {/* 新增的项中，只有最后一项没有有删除按钮 */}\n            <Icon\n              className=\"dynamic-delete-button delete\"\n              type=\"delete\"\n              onClick={e => {\n                e.stopPropagation();\n                this.delHeader(index, name);\n              }}\n            />\n          </Col>\n        </Row>\n      );\n    };\n\n    return (\n      <div className=\"project-tag\">\n        {this.state.tag.map((item, index) => {\n          return commonTpl(item, index, 'tag');\n        })}\n      </div>\n    );\n  }\n}\n\nexport default ProjectTag;\n"]}