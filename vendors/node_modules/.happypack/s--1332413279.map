{"version":3,"sources":["node_modules\\json-schema-editor-visual\\package\\utils.js"],"names":["JSONPATH_JOIN_CHAR","exports","lang","format","name","_","require","SCHEMA_TYPE","defaultSchema","string","type","number","array","items","object","properties","boolean","integer","debounce","func","wait","timeout","clearTimeout","setTimeout","getData","state","keys","curState","i","length","setData","value","deleteData","getParentKeys","arr","concat","splice","clearSomeFields","data","newData","Object","assign","forEach","key","getFieldstitle","requiredtitle","map","push","title","handleSchemaRequired","schema","checked","required","handleObject","cloneObject","obj","Array","isArray","newArr","item","index","newObj"],"mappings":"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","file":"utils.js","sourceRoot":"C:/Users/DUOYI/Desktop/api/test/vendors","sourcesContent":["const JSONPATH_JOIN_CHAR = '.';\nexports.JSONPATH_JOIN_CHAR = JSONPATH_JOIN_CHAR;\nexports.lang = 'en_US';\nexports.format = [\n  { name: 'date-time' },\n  { name: 'date' },\n  { name: 'email' },\n  { name: 'hostname' },\n  { name: 'ipv4' },\n  { name: 'ipv6' },\n  { name: 'uri' }\n];\nconst _ = require('underscore');\nexports.SCHEMA_TYPE = ['string', 'number', 'array', 'object', 'boolean', 'integer'];\nexports.defaultSchema = {\n  string: {\n    type: 'string'\n  },\n  number: {\n    type: 'number'\n  },\n  array: {\n    type: 'array',\n    items: {\n      type: 'string'\n    }\n  },\n  object: {\n    type: 'object',\n    properties: {}\n  },\n  boolean: {\n    type: 'boolean'\n  },\n  integer: {\n    type: 'integer'\n  }\n};\n\n// 防抖函数，减少高频触发的函数执行的频率\n// 请在 constructor 里使用:\n\n// this.func = debounce(this.func, 400);\nexports.debounce = (func, wait) => {\n  let timeout;\n  return function() {\n    clearTimeout(timeout);\n    timeout = setTimeout(func, wait);\n  };\n};\n\nfunction getData(state, keys) {\n  let curState = state;\n  for (let i = 0; i < keys.length; i++) {\n    curState = curState[keys[i]];\n  }\n  return curState;\n}\n\nexports.getData = getData;\n\nexports.setData = function(state, keys, value) {\n  let curState = state;\n  for (let i = 0; i < keys.length - 1; i++) {\n    curState = curState[keys[i]];\n  }\n  curState[keys[keys.length - 1]] = value;\n};\n\nexports.deleteData = function(state, keys) {\n  let curState = state;\n  for (let i = 0; i < keys.length - 1; i++) {\n    curState = curState[keys[i]];\n  }\n\n  delete curState[keys[keys.length - 1]];\n};\n\nexports.getParentKeys = function(keys) {\n  if (keys.length === 1) return [];\n  let arr = [].concat(keys);\n  arr.splice(keys.length - 1, 1);\n  return arr;\n};\n\nexports.clearSomeFields = function(keys, data) {\n  const newData = Object.assign({}, data);\n  keys.forEach(key => {\n    delete newData[key];\n  });\n  return newData;\n};\n\nfunction getFieldstitle(data) {\n  const requiredtitle = [];\n  Object.keys(data).map(title => {\n    requiredtitle.push(title);\n  });\n\n  return requiredtitle;\n}\n\nfunction handleSchemaRequired(schema, checked) {\n  // console.log(schema)\n  if (schema.type === 'object') {\n    let requiredtitle = getFieldstitle(schema.properties);\n\n    // schema.required = checked ? [].concat(requiredtitle) : [];\n    if (checked) {\n      schema.required = [].concat(requiredtitle);\n    } else {\n      delete schema.required;\n    }\n\n    handleObject(schema.properties, checked);\n  } else if (schema.type === 'array') {\n    handleSchemaRequired(schema.items, checked);\n  } else {\n    return schema;\n  }\n}\n\nfunction handleObject(properties, checked) {\n  for (var key in properties) {\n    if (properties[key].type === 'array' || properties[key].type === 'object')\n      handleSchemaRequired(properties[key], checked);\n  }\n}\n\nexports.handleSchemaRequired = handleSchemaRequired;\n\nfunction cloneObject(obj) {\n  if (typeof obj === 'object') {\n    if (Array.isArray(obj)) {\n      var newArr = [];\n      obj.forEach(function(item, index) {\n        newArr[index] = cloneObject(item);\n      });\n      return newArr;\n    } else {\n      var newObj = {};\n      for (var key in obj) {\n        newObj[key] = cloneObject(obj[key]);\n      }\n      return newObj;\n    }\n  } else {\n    return obj;\n  }\n}\n\nexports.cloneObject = cloneObject;\n"]}