'use strict';

exports.__esModule = true;
exports.default = undefined;

var _row = require('antd/lib/row');

var _row2 = _interopRequireDefault(_row);

var _col = require('antd/lib/col');

var _col2 = _interopRequireDefault(_col);

var _tooltip = require('antd/lib/tooltip');

var _tooltip2 = _interopRequireDefault(_tooltip);

var _icon = require('antd/lib/icon');

var _icon2 = _interopRequireDefault(_icon);

var _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');

var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);

var _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');

var _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);

var _inherits2 = require('babel-runtime/helpers/inherits');

var _inherits3 = _interopRequireDefault(_inherits2);

var _collapse = require('antd/lib/collapse');

var _collapse2 = _interopRequireDefault(_collapse);

var _select = require('antd/lib/select');

var _select2 = _interopRequireDefault(_select);

var _class, _temp; // 测试集合中的环境切换

var _react = require('react');

var _react2 = _interopRequireDefault(_react);

var _propTypes = require('prop-types');

var _propTypes2 = _interopRequireDefault(_propTypes);

require('./index.scss');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var Option = _select2.default.Option;
var Panel = _collapse2.default.Panel;
var CaseEnv = (_temp = _class = function (_React$Component) {
  (0, _inherits3.default)(CaseEnv, _React$Component);

  function CaseEnv(props) {
    (0, _classCallCheck3.default)(this, CaseEnv);

    var _this = (0, _possibleConstructorReturn3.default)(this, _React$Component.call(this, props));

    _this.callback = function (key) {
      _this.props.changeClose && _this.props.changeClose(key);
    };

    return _this;
  }

  CaseEnv.prototype.render = function render() {
    var _this2 = this;

    return _react2.default.createElement(
      _collapse2.default,
      {
        style: {
          margin: 0,
          marginBottom: '16px'
        },
        onChange: this.callback
        // activeKey={this.state.activeKey}
        , activeKey: this.props.collapseKey
      },
      _react2.default.createElement(
        Panel,
        {
          header: _react2.default.createElement(
            'span',
            null,
            ' ',
            '\u9009\u62E9\u6D4B\u8BD5\u7528\u4F8B\u73AF\u5883',
            _react2.default.createElement(
              _tooltip2.default,
              { title: '\u9ED8\u8BA4\u4F7F\u7528\u6D4B\u8BD5\u7528\u4F8B\u9009\u62E9\u7684\u73AF\u5883' },
              ' ',
              _react2.default.createElement(_icon2.default, { type: 'question-circle-o' }),
              ' '
            )
          ),
          key: '1'
        },
        _react2.default.createElement(
          'div',
          { className: 'case-env' },
          this.props.envList.length > 0 && _react2.default.createElement(
            'div',
            null,
            this.props.envList.map(function (item) {
              return _react2.default.createElement(
                _row2.default,
                {
                  key: item._id,
                  type: 'flex',
                  justify: 'space-around',
                  align: 'middle',
                  className: 'env-item'
                },
                _react2.default.createElement(
                  _col2.default,
                  { span: 6, className: 'label' },
                  _react2.default.createElement(
                    _tooltip2.default,
                    { title: item.name },
                    _react2.default.createElement(
                      'span',
                      { className: 'label-name' },
                      item.name
                    )
                  )
                ),
                _react2.default.createElement(
                  _col2.default,
                  { span: 18 },
                  _react2.default.createElement(
                    _select2.default,
                    {
                      style: {
                        width: '100%'
                      },
                      value: _this2.props.envValue[item._id] || '',
                      defaultValue: '',
                      onChange: function onChange(val) {
                        return _this2.props.currProjectEnvChange(val, item._id);
                      }
                    },
                    _react2.default.createElement(
                      Option,
                      { key: 'default', value: '' },
                      '\u9ED8\u8BA4\u73AF\u5883'
                    ),
                    item.env.map(function (key) {
                      return _react2.default.createElement(
                        Option,
                        { value: key.name, key: key._id },
                        key.name + ': ' + key.domain
                      );
                    })
                  )
                )
              );
            })
          )
        )
      )
    );
  };

  return CaseEnv;
}(_react2.default.Component), _class.propTypes = {
  envList: _propTypes2.default.array,
  currProjectEnvChange: _propTypes2.default.func,
  changeClose: _propTypes2.default.func,
  collapseKey: _propTypes2.default.any,
  envValue: _propTypes2.default.object
}, _temp);
exports.default = CaseEnv;