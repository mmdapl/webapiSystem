'use strict';

exports.__esModule = true;

var _modal = require('antd/lib/modal');

var _modal2 = _interopRequireDefault(_modal);

var _button = require('antd/lib/button');

var _button2 = _interopRequireDefault(_button);

var _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');

var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);

var _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');

var _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);

var _inherits2 = require('babel-runtime/helpers/inherits');

var _inherits3 = _interopRequireDefault(_inherits2);

var _class, _temp;

var _react = require('react');

var _react2 = _interopRequireDefault(_react);

var _propTypes = require('prop-types');

var _propTypes2 = _interopRequireDefault(_propTypes);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

// 嵌入到 BrowserRouter 内部，覆盖掉默认的 window.confirm
// http://reacttraining.cn/web/api/BrowserRouter/getUserConfirmation-func
var MyPopConfirm = (_temp = _class = function (_Component) {
  (0, _inherits3.default)(MyPopConfirm, _Component);

  function MyPopConfirm(props) {
    (0, _classCallCheck3.default)(this, MyPopConfirm);

    var _this = (0, _possibleConstructorReturn3.default)(this, _Component.call(this, props));

    _this.yes = function () {
      _this.props.callback(true);
      _this.setState({ visible: false });
    };

    _this.no = function () {
      _this.props.callback(false);
      _this.setState({ visible: false });
    };

    _this.state = {
      visible: true
    };
    return _this;
  }

  MyPopConfirm.prototype.componentWillReceiveProps = function componentWillReceiveProps() {
    this.setState({ visible: true });
  };

  MyPopConfirm.prototype.render = function render() {
    if (!this.state.visible) {
      return null;
    }
    return _react2.default.createElement(
      _modal2.default,
      {
        title: '\u4F60\u5373\u5C06\u79BB\u5F00\u7F16\u8F91\u9875\u9762',
        visible: this.state.visible,
        onCancel: this.no,
        footer: [_react2.default.createElement(
          _button2.default,
          { key: 'back', onClick: this.no },
          '\u53D6 \u6D88'
        ), _react2.default.createElement(
          _button2.default,
          { key: 'submit', onClick: this.yes },
          '\u786E \u5B9A'
        )]
      },
      _react2.default.createElement(
        'p',
        null,
        this.props.msg
      )
    );
  };

  return MyPopConfirm;
}(_react.PureComponent), _class.propTypes = {
  msg: _propTypes2.default.string,
  callback: _propTypes2.default.func
}, _temp);
exports.default = MyPopConfirm;