'use strict';

exports.__esModule = true;

var _modal = require('antd/lib/modal');

var _modal2 = _interopRequireDefault(_modal);

var _input = require('antd/lib/input');

var _input2 = _interopRequireDefault(_input);

var _row = require('antd/lib/row');

var _row2 = _interopRequireDefault(_row);

var _switch = require('antd/lib/switch');

var _switch2 = _interopRequireDefault(_switch);

var _col = require('antd/lib/col');

var _col2 = _interopRequireDefault(_col);

var _button = require('antd/lib/button');

var _button2 = _interopRequireDefault(_button);

var _icon = require('antd/lib/icon');

var _icon2 = _interopRequireDefault(_icon);

var _spin = require('antd/lib/spin');

var _spin2 = _interopRequireDefault(_spin);

var _tooltip = require('antd/lib/tooltip');

var _tooltip2 = _interopRequireDefault(_tooltip);

var _typeof2 = require('babel-runtime/helpers/typeof');

var _typeof3 = _interopRequireDefault(_typeof2);

var _assign = require('babel-runtime/core-js/object/assign');

var _assign2 = _interopRequireDefault(_assign);

var _stringify = require('babel-runtime/core-js/json/stringify');

var _stringify2 = _interopRequireDefault(_stringify);

var _extends4 = require('babel-runtime/helpers/extends');

var _extends5 = _interopRequireDefault(_extends4);

var _regenerator = require('babel-runtime/regenerator');

var _regenerator2 = _interopRequireDefault(_regenerator);

var _message2 = require('antd/lib/message');

var _message3 = _interopRequireDefault(_message2);

var _asyncToGenerator2 = require('babel-runtime/helpers/asyncToGenerator');

var _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);

var _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');

var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);

var _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');

var _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);

var _inherits2 = require('babel-runtime/helpers/inherits');

var _inherits3 = _interopRequireDefault(_inherits2);

var _select = require('antd/lib/select');

var _select2 = _interopRequireDefault(_select);

var _dec, _dec2, _class, _class2, _temp;
//import constants from '../../../../constants/variable.js'


var _react = require('react');

var _react2 = _interopRequireDefault(_react);

var _reactRedux = require('react-redux');

var _propTypes = require('prop-types');

var _propTypes2 = _interopRequireDefault(_propTypes);

var _reactRouter = require('react-router');

var _reactRouterDom = require('react-router-dom');

var _interfaceCol = require('../../../../reducer/modules/interfaceCol');

var _reactDndHtml5Backend = require('react-dnd-html5-backend');

var _reactDndHtml5Backend2 = _interopRequireDefault(_reactDndHtml5Backend);

var _project = require('../../../../reducer/modules/project');

var _reactDnd = require('react-dnd');

var _AceEditor = require('../../../../components/AceEditor/AceEditor');

var _AceEditor2 = _interopRequireDefault(_AceEditor);

var _reactabularTable = require('reactabular-table');

var Table = _interopRequireWildcard(_reactabularTable);

var _reactabularDnd = require('reactabular-dnd');

var dnd = _interopRequireWildcard(_reactabularDnd);

var _tableResolver = require('table-resolver');

var resolve = _interopRequireWildcard(_tableResolver);

var _axios = require('axios');

var _axios2 = _interopRequireDefault(_axios);

var _CaseReport = require('./CaseReport.js');

var _CaseReport2 = _interopRequireDefault(_CaseReport);

var _underscore = require('underscore');

var _underscore2 = _interopRequireDefault(_underscore);

var _CheckCrossInstall = require('../../../../components/Postman/CheckCrossInstall.js');

var _immer = require('immer');

var _immer2 = _interopRequireDefault(_immer);

var _Postman = require('../../../../components/Postman/Postman.js');

var _CaseEnv = require('../../../../components/CaseEnv');

var _CaseEnv2 = _interopRequireDefault(_CaseEnv);

var _Label = require('../../../../components/Label/Label.js');

var _Label2 = _interopRequireDefault(_Label);

var _copyToClipboard = require('copy-to-clipboard');

var _copyToClipboard2 = _interopRequireDefault(_copyToClipboard);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _require = require('../../../../../common/postmanLib.js'),
    handleParams = _require.handleParams,
    crossRequest = _require.crossRequest,
    handleCurrDomain = _require.handleCurrDomain,
    checkNameIsExistInArray = _require.checkNameIsExistInArray;

var _require2 = require('../../../../../common/utils.js'),
    handleParamsValue = _require2.handleParamsValue,
    json_parse = _require2.json_parse,
    ArrayToObject = _require2.ArrayToObject;

var Option = _select2.default.Option;
var createContext = require('../../../../../common/createContext');

var defaultModalStyle = {
  top: 10
};

function handleReport(json) {
  try {
    return JSON.parse(json);
  } catch (e) {
    return {};
  }
}

var InterfaceColContent = (_dec = (0, _reactRedux.connect)(function (state) {
  return {
    interfaceColList: state.interfaceCol.interfaceColList,
    currColId: state.interfaceCol.currColId,
    currCaseId: state.interfaceCol.currCaseId,
    isShowCol: state.interfaceCol.isShowCol,
    isRander: state.interfaceCol.isRander,
    currCaseList: state.interfaceCol.currCaseList,
    currProject: state.project.currProject,
    token: state.project.token,
    envList: state.interfaceCol.envList,
    curProjectRole: state.project.currProject.role,
    projectEnv: state.project.projectEnv,
    curUid: state.user.uid
  };
}, {
  fetchInterfaceColList: _interfaceCol.fetchInterfaceColList,
  fetchCaseList: _interfaceCol.fetchCaseList,
  setColData: _interfaceCol.setColData,
  getToken: _project.getToken,
  getEnv: _project.getEnv,
  fetchCaseEnvList: _interfaceCol.fetchCaseEnvList
}), _dec2 = (0, _reactDnd.DragDropContext)(_reactDndHtml5Backend2.default), _dec(_class = (0, _reactRouter.withRouter)(_class = _dec2(_class = (_temp = _class2 = function (_Component) {
  (0, _inherits3.default)(InterfaceColContent, _Component);

  function InterfaceColContent(props) {
    var _this2 = this;

    (0, _classCallCheck3.default)(this, InterfaceColContent);

    var _this = (0, _possibleConstructorReturn3.default)(this, _Component.call(this, props));

    _this.handleChangeInterfaceCol = function (desc, name) {
      var params = {
        col_id: _this.props.currColId,
        name: name,
        desc: desc
      };

      _axios2.default.post('/api/col/up_col', params).then(function () {
        var _ref = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee(res) {
          var project_id;
          return _regenerator2.default.wrap(function _callee$(_context) {
            while (1) {
              switch (_context.prev = _context.next) {
                case 0:
                  if (!res.data.errcode) {
                    _context.next = 2;
                    break;
                  }

                  return _context.abrupt('return', _message3.default.error(res.data.errmsg));

                case 2:
                  project_id = _this.props.match.params.id;
                  _context.next = 5;
                  return _this.props.fetchInterfaceColList(project_id);

                case 5:
                  _message3.default.success('接口集合简介更新成功');

                case 6:
                case 'end':
                  return _context.stop();
              }
            }
          }, _callee, _this2);
        }));

        return function (_x) {
          return _ref.apply(this, arguments);
        };
      }());
    };

    _this.handleReqHeader = function (project_id, req_header, case_env) {
      var envItem = _underscore2.default.find(_this.props.envList, function (item) {
        return item._id === project_id;
      });

      var currDomain = handleCurrDomain(envItem && envItem.env, case_env);
      var header = currDomain.header;
      header.forEach(function (item) {
        if (!checkNameIsExistInArray(item.name, req_header)) {
          // item.abled = true;
          item = (0, _extends5.default)({}, item, {
            abled: true
          });
          req_header.push(item);
        }
      });
      return req_header;
    };

    _this.handleColdata = function (rows) {
      var currColEnvObj = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

      var that = _this;
      var newRows = (0, _immer2.default)(rows, function (draftRows) {
        draftRows.map(function (item) {
          item.id = item._id;
          item._test_status = item.test_status;
          if (currColEnvObj[item.project_id]) {
            item.case_env = currColEnvObj[item.project_id];
          }
          item.req_headers = that.handleReqHeader(item.project_id, item.req_headers, item.case_env);
          return item;
        });
      });
      _this.setState({ rows: newRows });
    };

    _this.executeTests = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee2() {
      var _loop, i, l, newRows, curitem;

      return _regenerator2.default.wrap(function _callee2$(_context3) {
        while (1) {
          switch (_context3.prev = _context3.next) {
            case 0:
              _loop = /*#__PURE__*/_regenerator2.default.mark(function _loop(i, l, _newRows, _curitem) {
                var rows, envItem, status, result;
                return _regenerator2.default.wrap(function _loop$(_context2) {
                  while (1) {
                    switch (_context2.prev = _context2.next) {
                      case 0:
                        rows = _this.state.rows;
                        envItem = _underscore2.default.find(_this.props.envList, function (item) {
                          return item._id === rows[i].project_id;
                        });


                        _curitem = (0, _assign2.default)({}, rows[i], {
                          env: envItem.env,
                          pre_script: _this.props.currProject.pre_script,
                          after_script: _this.props.currProject.after_script
                        }, { test_status: 'loading' });
                        _newRows = [].concat([], rows);
                        _newRows[i] = _curitem;
                        _this.setState({ rows: _newRows });
                        status = 'error', result = void 0;
                        _context2.prev = 7;
                        _context2.next = 10;
                        return _this.handleTest(_curitem);

                      case 10:
                        result = _context2.sent;


                        if (result.code === 400) {
                          status = 'error';
                        } else if (result.code === 0) {
                          status = 'ok';
                        } else if (result.code === 1) {
                          status = 'invalid';
                        }
                        _context2.next = 19;
                        break;

                      case 14:
                        _context2.prev = 14;
                        _context2.t0 = _context2['catch'](7);

                        console.error(_context2.t0);
                        status = 'error';
                        result = _context2.t0;

                      case 19:

                        //result.body = result.data;
                        _this.reports[_curitem._id] = result;
                        _this.records[_curitem._id] = {
                          status: result.status,
                          params: result.params,
                          body: result.res_body
                        };

                        _curitem = (0, _assign2.default)({}, rows[i], { test_status: status });
                        _newRows = [].concat([], rows);
                        _newRows[i] = _curitem;
                        _this.setState({ rows: _newRows });
                        newRows = _newRows;
                        curitem = _curitem;

                      case 27:
                      case 'end':
                        return _context2.stop();
                    }
                  }
                }, _loop, _this2, [[7, 14]]);
              });
              i = 0, l = _this.state.rows.length;

            case 2:
              if (!(i < l)) {
                _context3.next = 7;
                break;
              }

              return _context3.delegateYield(_loop(i, l, newRows, curitem), 't0', 4);

            case 4:
              i++;
              _context3.next = 2;
              break;

            case 7:
              _context3.next = 9;
              return _axios2.default.post('/api/col/up_col', {
                col_id: _this.props.currColId,
                test_report: (0, _stringify2.default)(_this.reports)
              });

            case 9:
            case 'end':
              return _context3.stop();
          }
        }
      }, _callee2, _this2);
    }));

    _this.handleTest = function () {
      var _ref3 = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee3(interfaceData) {
        var requestParams, options, result, data, res, validRes, responseData;
        return _regenerator2.default.wrap(function _callee3$(_context4) {
          while (1) {
            switch (_context4.prev = _context4.next) {
              case 0:
                requestParams = {};
                options = handleParams(interfaceData, _this.handleValue, requestParams);
                result = {
                  code: 400,
                  msg: '数据异常',
                  validRes: []
                };
                _context4.prev = 3;
                _context4.next = 6;
                return crossRequest(options, interfaceData.pre_script, interfaceData.after_script, createContext(_this.props.curUid, _this.props.match.params.id, interfaceData.interface_id));

              case 6:
                data = _context4.sent;

                options.taskId = _this.props.curUid;
                res = data.res.body = json_parse(data.res.body);

                result = (0, _extends5.default)({}, options, result, {
                  res_header: data.res.header,
                  res_body: res,
                  status: data.res.status,
                  statusText: data.res.statusText
                });

                if (options.data && (0, _typeof3.default)(options.data) === 'object') {
                  requestParams = (0, _extends5.default)({}, requestParams, options.data);
                }

                validRes = [];
                responseData = (0, _assign2.default)({}, {
                  status: data.res.status,
                  body: res,
                  header: data.res.header,
                  statusText: data.res.statusText
                });

                // 断言测试

                _context4.next = 15;
                return _this.handleScriptTest(interfaceData, responseData, validRes, requestParams);

              case 15:

                if (validRes.length === 0) {
                  result.code = 0;
                  result.validRes = [{
                    message: '验证通过'
                  }];
                } else if (validRes.length > 0) {
                  result.code = 1;
                  result.validRes = validRes;
                }
                _context4.next = 21;
                break;

              case 18:
                _context4.prev = 18;
                _context4.t0 = _context4['catch'](3);

                result = (0, _extends5.default)({}, options, result, {
                  res_header: _context4.t0.header,
                  res_body: _context4.t0.body || _context4.t0.message,
                  status: 0,
                  statusText: _context4.t0.message,
                  code: 400,
                  validRes: [{
                    message: _context4.t0.message
                  }]
                });

              case 21:

                result.params = requestParams;
                return _context4.abrupt('return', result);

              case 23:
              case 'end':
                return _context4.stop();
            }
          }
        }, _callee3, _this2, [[3, 18]]);
      }));

      return function (_x3) {
        return _ref3.apply(this, arguments);
      };
    }();

    _this.handleScriptTest = function () {
      var _ref4 = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee4(interfaceData, response, validRes, requestParams) {
        var test;
        return _regenerator2.default.wrap(function _callee4$(_context5) {
          while (1) {
            switch (_context5.prev = _context5.next) {
              case 0:
                _context5.prev = 0;
                _context5.next = 3;
                return _axios2.default.post('/api/col/run_script', {
                  response: response,
                  records: _this.records,
                  script: interfaceData.test_script,
                  params: requestParams,
                  col_id: _this.props.currColId,
                  interface_id: interfaceData.interface_id
                });

              case 3:
                test = _context5.sent;

                if (test.data.errcode !== 0) {
                  test.data.data.logs.forEach(function (item) {
                    validRes.push({ message: item });
                  });
                }
                _context5.next = 10;
                break;

              case 7:
                _context5.prev = 7;
                _context5.t0 = _context5['catch'](0);

                validRes.push({
                  message: 'Error: ' + _context5.t0.message
                });

              case 10:
              case 'end':
                return _context5.stop();
            }
          }
        }, _callee4, _this2, [[0, 7]]);
      }));

      return function (_x4, _x5, _x6, _x7) {
        return _ref4.apply(this, arguments);
      };
    }();

    _this.handleValue = function (val, global) {
      var globalValue = ArrayToObject(global);
      var context = (0, _assign2.default)({}, { global: globalValue }, _this.records);
      return handleParamsValue(val, context);
    };

    _this.arrToObj = function (arr, requestParams) {
      arr = arr || [];
      var obj = {};
      arr.forEach(function (item) {
        if (item.name && item.enable && item.type !== 'file') {
          obj[item.name] = _this.handleValue(item.value);
          if (requestParams) {
            requestParams[item.name] = obj[item.name];
          }
        }
      });
      return obj;
    };

    _this.onDrop = function () {
      var changes = [];
      _this.state.rows.forEach(function (item, index) {
        changes.push({ id: item._id, index: index });
      });
      _axios2.default.post('/api/col/up_case_index', changes).then(function () {
        _this.props.fetchInterfaceColList(_this.props.match.params.id);
      });
    };

    _this.onChangeTest = function (d) {

      _this.setState({
        commonSetting: (0, _extends5.default)({}, _this.state.commonSetting, {
          checkScript: (0, _extends5.default)({}, _this.state.commonSetting.checkScript, {
            content: d.text
          })
        })
      });
    };

    _this.handleInsertCode = function (code) {
      _this.aceEditor.editor.insertCode(code);
    };

    _this.changeCollapseClose = function (key) {
      if (key) {
        _this.setState({
          collapseKey: key
        });
      } else {
        _this.setState({
          collapseKey: '1',
          currColEnvObj: {}
        });
      }
    };

    _this.openReport = function (id) {
      if (!_this.reports[id]) {
        return _message3.default.warn('还没有生成报告');
      }
      _this.setState({ visible: true, curCaseid: id });
    };

    _this.openAdv = function (id) {
      var findCase = _underscore2.default.find(_this.props.currCaseList, function (item) {
        return item.id === id;
      });

      _this.setState({
        enableScript: findCase.enable_script,
        curScript: findCase.test_script,
        advVisible: true,
        curCaseid: id
      });
    };

    _this.handleScriptChange = function (d) {
      _this.setState({ curScript: d.text });
    };

    _this.handleAdvCancel = function () {
      _this.setState({ advVisible: false });
    };

    _this.handleAdvOk = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee5() {
      var _this$state, curCaseid, enableScript, curScript, res, currColId;

      return _regenerator2.default.wrap(function _callee5$(_context6) {
        while (1) {
          switch (_context6.prev = _context6.next) {
            case 0:
              _this$state = _this.state, curCaseid = _this$state.curCaseid, enableScript = _this$state.enableScript, curScript = _this$state.curScript;
              _context6.next = 3;
              return _axios2.default.post('/api/col/up_case', {
                id: curCaseid,
                test_script: curScript,
                enable_script: enableScript
              });

            case 3:
              res = _context6.sent;

              if (res.data.errcode === 0) {
                _message3.default.success('更新成功');
              }
              _this.setState({ advVisible: false });
              currColId = _this.currColId;

              _this.props.setColData({
                currColId: +currColId,
                isShowCol: true,
                isRander: false
              });
              _context6.next = 10;
              return _this.props.fetchCaseList(currColId);

            case 10:

              _this.handleColdata(_this.props.currCaseList);

            case 11:
            case 'end':
              return _context6.stop();
          }
        }
      }, _callee5, _this2);
    }));

    _this.handleCancel = function () {
      _this.setState({ visible: false });
    };

    _this.currProjectEnvChange = function (envName, project_id) {
      var _extends2;

      var currColEnvObj = (0, _extends5.default)({}, _this.state.currColEnvObj, (_extends2 = {}, _extends2[project_id] = envName, _extends2));
      _this.setState({ currColEnvObj: currColEnvObj });
      // this.handleColdata(this.props.currCaseList, envName, project_id);
      _this.handleColdata(_this.props.currCaseList, currColEnvObj);
    };

    _this.autoTests = function () {
      _this.setState({ autoVisible: true, currColEnvObj: {}, collapseKey: '' });
    };

    _this.handleAuto = function () {
      _this.setState({
        autoVisible: false,
        email: false,
        download: false,
        mode: 'html',
        currColEnvObj: {},
        collapseKey: ''
      });
    };

    _this.copyUrl = function (url) {
      (0, _copyToClipboard2.default)(url);
      _message3.default.success('已经成功复制到剪切板');
    };

    _this.modeChange = function (mode) {
      _this.setState({ mode: mode });
    };

    _this.emailChange = function (email) {
      _this.setState({ email: email });
    };

    _this.downloadChange = function (download) {
      _this.setState({ download: download });
    };

    _this.handleColEnvObj = function (envObj) {
      var str = '';
      for (var key in envObj) {
        str += envObj[key] ? '&env_' + key + '=' + envObj[key] : '';
      }
      return str;
    };

    _this.handleCommonSetting = function () {
      var setting = _this.state.commonSetting;

      var params = (0, _extends5.default)({
        col_id: _this.props.currColId
      }, setting);
      console.log(params);

      _axios2.default.post('/api/col/up_col', params).then(function () {
        var _ref6 = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee6(res) {
          return _regenerator2.default.wrap(function _callee6$(_context7) {
            while (1) {
              switch (_context7.prev = _context7.next) {
                case 0:
                  if (!res.data.errcode) {
                    _context7.next = 2;
                    break;
                  }

                  return _context7.abrupt('return', _message3.default.error(res.data.errmsg));

                case 2:
                  _message3.default.success('配置测试集成功');

                case 3:
                case 'end':
                  return _context7.stop();
              }
            }
          }, _callee6, _this2);
        }));

        return function (_x8) {
          return _ref6.apply(this, arguments);
        };
      }());

      _this.setState({
        commonSettingModalVisible: false
      });
    };

    _this.cancelCommonSetting = function () {
      _this.setState({
        commonSettingModalVisible: false
      });
    };

    _this.openCommonSetting = function () {
      _this.setState({
        commonSettingModalVisible: true
      });
    };

    _this.changeCommonFieldSetting = function (key) {
      return function (e) {
        var _extends3;

        var value = e;
        if ((typeof e === 'undefined' ? 'undefined' : (0, _typeof3.default)(e)) === 'object' && e) {
          value = e.target.value;
        }
        var checkResponseField = _this.state.commonSetting.checkResponseField;

        _this.setState({
          commonSetting: (0, _extends5.default)({}, _this.state.commonSetting, {
            checkResponseField: (0, _extends5.default)({}, checkResponseField, (_extends3 = {}, _extends3[key] = value, _extends3))
          })
        });
      };
    };

    _this.reports = {};
    _this.records = {};
    _this.state = {
      rows: [],
      reports: {},
      visible: false,
      curCaseid: null,
      hasPlugin: false,

      advVisible: false,
      curScript: '',
      enableScript: false,
      autoVisible: false,
      mode: 'html',
      email: false,
      download: false,
      currColEnvObj: {},
      collapseKey: '1',
      commonSettingModalVisible: false,
      commonSetting: {
        checkHttpCodeIs200: false,
        checkResponseField: {
          name: 'code',
          value: '0',
          enable: false
        },
        checkResponseSchema: false,
        checkScript: {
          enable: false,
          content: ''
        }
      }
    };
    _this.onRow = _this.onRow.bind(_this);
    _this.onMoveRow = _this.onMoveRow.bind(_this);
    return _this;
  }

  InterfaceColContent.prototype.handleColIdChange = function () {
    var _ref7 = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee7(newColId) {
      var result;
      return _regenerator2.default.wrap(function _callee7$(_context8) {
        while (1) {
          switch (_context8.prev = _context8.next) {
            case 0:
              this.props.setColData({
                currColId: +newColId,
                isShowCol: true,
                isRander: false
              });

              _context8.next = 3;
              return this.props.fetchCaseList(newColId);

            case 3:
              result = _context8.sent;

              if (result.payload.data.errcode === 0) {
                this.reports = handleReport(result.payload.data.colData.test_report);
                this.setState({
                  commonSetting: (0, _extends5.default)({}, this.state.commonSetting, result.payload.data.colData)
                });
              }

              _context8.next = 7;
              return this.props.fetchCaseList(newColId);

            case 7:
              _context8.next = 9;
              return this.props.fetchCaseEnvList(newColId);

            case 9:
              this.changeCollapseClose();
              this.handleColdata(this.props.currCaseList);

            case 11:
            case 'end':
              return _context8.stop();
          }
        }
      }, _callee7, this);
    }));

    function handleColIdChange(_x9) {
      return _ref7.apply(this, arguments);
    }

    return handleColIdChange;
  }();

  InterfaceColContent.prototype.componentWillMount = function () {
    var _ref8 = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee8() {
      var _this3 = this;

      var result, currColId, params, actionId;
      return _regenerator2.default.wrap(function _callee8$(_context9) {
        while (1) {
          switch (_context9.prev = _context9.next) {
            case 0:
              _context9.next = 2;
              return this.props.fetchInterfaceColList(this.props.match.params.id);

            case 2:
              result = _context9.sent;
              _context9.next = 5;
              return this.props.getToken(this.props.match.params.id);

            case 5:
              currColId = this.props.currColId;
              params = this.props.match.params;
              actionId = params.actionId;

              this.currColId = currColId = +actionId || result.payload.data.data[0]._id;
              this.props.history.push('/project/' + params.id + '/interface/col/' + currColId);

              if (!(currColId && currColId != 0)) {
                _context9.next = 13;
                break;
              }

              _context9.next = 13;
              return this.handleColIdChange(currColId);

            case 13:

              this._crossRequestInterval = (0, _CheckCrossInstall.initCrossRequest)(function (hasPlugin) {
                _this3.setState({ hasPlugin: hasPlugin });
              });

            case 14:
            case 'end':
              return _context9.stop();
          }
        }
      }, _callee8, this);
    }));

    function componentWillMount() {
      return _ref8.apply(this, arguments);
    }

    return componentWillMount;
  }();

  InterfaceColContent.prototype.componentWillUnmount = function componentWillUnmount() {
    clearInterval(this._crossRequestInterval);
  };

  // 更新分类简介


  // 整合header信息


  //response, validRes
  // 断言测试


  InterfaceColContent.prototype.onRow = function onRow(row) {
    return { rowId: row.id, onMove: this.onMoveRow, onDrop: this.onDrop };
  };

  InterfaceColContent.prototype.onMoveRow = function onMoveRow(_ref9) {
    var sourceRowId = _ref9.sourceRowId,
        targetRowId = _ref9.targetRowId;

    var rows = dnd.moveRows({ sourceRowId: sourceRowId, targetRowId: targetRowId })(this.state.rows);

    if (rows) {
      this.setState({ rows: rows });
    }
  };

  InterfaceColContent.prototype.componentWillReceiveProps = function () {
    var _ref10 = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee9(nextProps) {
      var newColId;
      return _regenerator2.default.wrap(function _callee9$(_context10) {
        while (1) {
          switch (_context10.prev = _context10.next) {
            case 0:
              newColId = !isNaN(nextProps.match.params.actionId) ? +nextProps.match.params.actionId : 0;


              if (newColId && this.currColId && newColId !== this.currColId || nextProps.isRander) {
                this.currColId = newColId;
                this.handleColIdChange(newColId);
              }

            case 2:
            case 'end':
              return _context10.stop();
          }
        }
      }, _callee9, this);
    }));

    function componentWillReceiveProps(_x10) {
      return _ref10.apply(this, arguments);
    }

    return componentWillReceiveProps;
  }();

  // 测试用例环境面板折叠


  InterfaceColContent.prototype.render = function render() {
    var _this4 = this;

    var currProjectId = this.props.currProject._id;
    var columns = [{
      property: 'casename',
      header: {
        label: '用例名称'
      },
      props: {
        style: {
          width: '250px'
        }
      },
      cell: {
        formatters: [function (text, _ref11) {
          var rowData = _ref11.rowData;

          var record = rowData;
          return _react2.default.createElement(
            _reactRouterDom.Link,
            { to: '/project/' + currProjectId + '/interface/case/' + record._id },
            record.casename.length > 23 ? record.casename.substr(0, 20) + '...' : record.casename
          );
        }]
      }
    }, {
      header: {
        label: 'key',
        formatters: [function () {
          return _react2.default.createElement(
            _tooltip2.default,
            {
              title: _react2.default.createElement(
                'span',
                null,
                ' ',
                '\u6BCF\u4E2A\u7528\u4F8B\u90FD\u6709\u552F\u4E00\u7684key\uFF0C\u7528\u4E8E\u83B7\u53D6\u6240\u5339\u914D\u63A5\u53E3\u7684\u54CD\u5E94\u6570\u636E\uFF0C\u4F8B\u5982\u4F7F\u7528',
                ' ',
                _react2.default.createElement(
                  'a',
                  {
                    href: 'https://hellosean1025.github.io/yapi/documents/case.html#%E7%AC%AC%E4%BA%8C%E6%AD%A5%EF%BC%8C%E7%BC%96%E8%BE%91%E6%B5%8B%E8%AF%95%E7%94%A8%E4%BE%8B',
                    className: 'link-tooltip',
                    target: 'blank'
                  },
                  ' ',
                  '\u53D8\u91CF\u53C2\u6570',
                  ' '
                ),
                ' ',
                '\u529F\u80FD',
                ' '
              )
            },
            'Key'
          );
        }]
      },
      props: {
        style: {
          width: '100px'
        }
      },
      cell: {
        formatters: [function (value, _ref12) {
          var rowData = _ref12.rowData;

          return _react2.default.createElement(
            'span',
            null,
            rowData._id
          );
        }]
      }
    }, {
      property: 'test_status',
      header: {
        label: '状态'
      },
      props: {
        style: {
          width: '100px'
        }
      },
      cell: {
        formatters: [function (value, _ref13) {
          var rowData = _ref13.rowData;

          var id = rowData._id;
          var code = _this4.reports[id] ? _this4.reports[id].code : 0;
          if (rowData.test_status === 'loading') {
            return _react2.default.createElement(
              'div',
              null,
              _react2.default.createElement(_spin2.default, null)
            );
          }

          switch (code) {
            case 0:
              return _react2.default.createElement(
                'div',
                null,
                _react2.default.createElement(
                  _tooltip2.default,
                  { title: 'Pass' },
                  _react2.default.createElement(_icon2.default, {
                    style: {
                      color: '#00a854'
                    },
                    type: 'check-circle'
                  })
                )
              );
            case 400:
              return _react2.default.createElement(
                'div',
                null,
                _react2.default.createElement(
                  _tooltip2.default,
                  { title: '\u8BF7\u6C42\u5F02\u5E38' },
                  _react2.default.createElement(_icon2.default, {
                    type: 'info-circle',
                    style: {
                      color: '#f04134'
                    }
                  })
                )
              );
            case 1:
              return _react2.default.createElement(
                'div',
                null,
                _react2.default.createElement(
                  _tooltip2.default,
                  { title: '\u9A8C\u8BC1\u5931\u8D25' },
                  _react2.default.createElement(_icon2.default, {
                    type: 'exclamation-circle',
                    style: {
                      color: '#ffbf00'
                    }
                  })
                )
              );
            default:
              return _react2.default.createElement(
                'div',
                null,
                _react2.default.createElement(_icon2.default, {
                  style: {
                    color: '#00a854'
                  },
                  type: 'check-circle'
                })
              );
          }
        }]
      }
    }, {
      property: 'path',
      header: {
        label: '接口路径'
      },
      cell: {
        formatters: [function (text, _ref14) {
          var rowData = _ref14.rowData;

          var record = rowData;
          return _react2.default.createElement(
            _tooltip2.default,
            { title: '\u8DF3\u8F6C\u5230\u5BF9\u5E94\u63A5\u53E3' },
            _react2.default.createElement(
              _reactRouterDom.Link,
              { to: '/project/' + record.project_id + '/interface/api/' + record.interface_id },
              record.path.length > 23 ? record.path + '...' : record.path
            )
          );
        }]
      }
    }, {
      header: {
        label: '测试报告'
      },
      props: {
        style: {
          width: '200px'
        }
      },
      cell: {
        formatters: [function (text, _ref15) {
          var rowData = _ref15.rowData;

          var reportFun = function reportFun() {
            if (!_this4.reports[rowData.id]) {
              return null;
            }
            return _react2.default.createElement(
              _button2.default,
              { onClick: function onClick() {
                  return _this4.openReport(rowData.id);
                } },
              '\u6D4B\u8BD5\u62A5\u544A'
            );
          };
          return _react2.default.createElement(
            'div',
            { className: 'interface-col-table-action' },
            reportFun()
          );
        }]
      }
    }];
    var rows = this.state.rows;

    var components = {
      header: {
        cell: dnd.Header
      },
      body: {
        row: dnd.Row
      }
    };
    var resolvedColumns = resolve.columnChildren({ columns: columns });
    var resolvedRows = resolve.resolve({ columns: resolvedColumns, method: resolve.nested })(rows);

    var localUrl = location.protocol + '//' + location.hostname + (location.port !== '' ? ':' + location.port : '');
    var currColEnvObj = this.handleColEnvObj(this.state.currColEnvObj);
    var autoTestsUrl = '/api/open/run_auto_test?id=' + this.props.currColId + '&token=' + this.props.token + (currColEnvObj ? currColEnvObj : '') + '&mode=' + this.state.mode + '&email=' + this.state.email + '&download=' + this.state.download;

    var col_name = '';
    var col_desc = '';

    for (var i = 0; i < this.props.interfaceColList.length; i++) {
      if (this.props.interfaceColList[i]._id === this.props.currColId) {
        col_name = this.props.interfaceColList[i].name;
        col_desc = this.props.interfaceColList[i].desc;
        break;
      }
    }

    return _react2.default.createElement(
      'div',
      { className: 'interface-col' },
      _react2.default.createElement(
        _modal2.default,
        {
          title: '\u901A\u7528\u89C4\u5219\u914D\u7F6E',
          visible: this.state.commonSettingModalVisible,
          onOk: this.handleCommonSetting,
          onCancel: this.cancelCommonSetting,
          width: '1000px',
          style: defaultModalStyle
        },
        _react2.default.createElement(
          'div',
          { className: 'common-setting-modal' },
          _react2.default.createElement(
            _row2.default,
            { className: 'setting-item' },
            _react2.default.createElement(
              _col2.default,
              { className: 'col-item', span: '4' },
              _react2.default.createElement(
                'label',
                null,
                '\u68C0\u67E5HttpCode:\xA0',
                _react2.default.createElement(
                  _tooltip2.default,
                  { title: '检查 http code 是否为 200' },
                  _react2.default.createElement(_icon2.default, { type: 'question-circle-o', style: { width: '10px' } })
                )
              )
            ),
            _react2.default.createElement(
              _col2.default,
              { className: 'col-item', span: '18' },
              _react2.default.createElement(_switch2.default, { onChange: function onChange(e) {
                  var commonSetting = _this4.state.commonSetting;

                  _this4.setState({
                    commonSetting: (0, _extends5.default)({}, commonSetting, {
                      checkHttpCodeIs200: e
                    })
                  });
                }, checked: this.state.commonSetting.checkHttpCodeIs200, checkedChildren: '\u5F00', unCheckedChildren: '\u5173' })
            )
          ),
          _react2.default.createElement(
            _row2.default,
            { className: 'setting-item' },
            _react2.default.createElement(
              _col2.default,
              { className: 'col-item', span: '4' },
              _react2.default.createElement(
                'label',
                null,
                '\u68C0\u67E5\u8FD4\u56DEjson:\xA0',
                _react2.default.createElement(
                  _tooltip2.default,
                  { title: '检查接口返回数据字段值，比如检查 code 是不是等于 0' },
                  _react2.default.createElement(_icon2.default, { type: 'question-circle-o', style: { width: '10px' } })
                )
              )
            ),
            _react2.default.createElement(
              _col2.default,
              { className: 'col-item', span: '6' },
              _react2.default.createElement(_input2.default, { value: this.state.commonSetting.checkResponseField.name, onChange: this.changeCommonFieldSetting('name'), placeholder: '\u5B57\u6BB5\u540D' })
            ),
            _react2.default.createElement(
              _col2.default,
              { className: 'col-item', span: '6' },
              _react2.default.createElement(_input2.default, { onChange: this.changeCommonFieldSetting('value'), value: this.state.commonSetting.checkResponseField.value, placeholder: '\u503C' })
            ),
            _react2.default.createElement(
              _col2.default,
              { className: 'col-item', span: '6' },
              _react2.default.createElement(_switch2.default, { onChange: this.changeCommonFieldSetting('enable'), checked: this.state.commonSetting.checkResponseField.enable, checkedChildren: '\u5F00', unCheckedChildren: '\u5173' })
            )
          ),
          _react2.default.createElement(
            _row2.default,
            { className: 'setting-item' },
            _react2.default.createElement(
              _col2.default,
              { className: 'col-item', span: '4' },
              _react2.default.createElement(
                'label',
                null,
                '\u68C0\u67E5\u8FD4\u56DE\u6570\u636E\u7ED3\u6784:\xA0',
                _react2.default.createElement(
                  _tooltip2.default,
                  { title: '只有 response 基于 json-schema 方式定义，该检查才会生效' },
                  _react2.default.createElement(_icon2.default, { type: 'question-circle-o', style: { width: '10px' } })
                )
              )
            ),
            _react2.default.createElement(
              _col2.default,
              { className: 'col-item', span: '18' },
              _react2.default.createElement(_switch2.default, { onChange: function onChange(e) {
                  var commonSetting = _this4.state.commonSetting;

                  _this4.setState({
                    commonSetting: (0, _extends5.default)({}, commonSetting, {
                      checkResponseSchema: e
                    })
                  });
                }, checked: this.state.commonSetting.checkResponseSchema, checkedChildren: '\u5F00', unCheckedChildren: '\u5173' })
            )
          ),
          _react2.default.createElement(
            _row2.default,
            { className: 'setting-item' },
            _react2.default.createElement(
              _col2.default,
              { className: 'col-item  ', span: '4' },
              _react2.default.createElement(
                'label',
                null,
                '\u5168\u5C40\u6D4B\u8BD5\u811A\u672C:\xA0',
                _react2.default.createElement(
                  _tooltip2.default,
                  { title: '在跑自动化测试时，优先调用全局脚本，只有全局脚本通过测试，才会开始跑case自定义的测试脚本' },
                  _react2.default.createElement(_icon2.default, { type: 'question-circle-o', style: { width: '10px' } })
                )
              )
            ),
            _react2.default.createElement(
              _col2.default,
              { className: 'col-item', span: '14' },
              _react2.default.createElement(
                'div',
                null,
                _react2.default.createElement(_switch2.default, { onChange: function onChange(e) {
                    var commonSetting = _this4.state.commonSetting;

                    _this4.setState({
                      commonSetting: (0, _extends5.default)({}, commonSetting, {
                        checkScript: (0, _extends5.default)({}, _this4.state.checkScript, {
                          enable: e
                        })
                      })
                    });
                  }, checked: this.state.commonSetting.checkScript.enable, checkedChildren: '\u5F00', unCheckedChildren: '\u5173' })
              ),
              _react2.default.createElement(_AceEditor2.default, {
                onChange: this.onChangeTest,
                className: 'case-script',
                data: this.state.commonSetting.checkScript.content,
                ref: function ref(aceEditor) {
                  _this4.aceEditor = aceEditor;
                }
              })
            ),
            _react2.default.createElement(
              _col2.default,
              { span: '6' },
              _react2.default.createElement(
                'div',
                { className: 'insert-code' },
                _Postman.InsertCodeMap.map(function (item) {
                  return _react2.default.createElement(
                    'div',
                    {
                      style: { cursor: 'pointer' },
                      className: 'code-item',
                      key: item.title,
                      onClick: function onClick() {
                        _this4.handleInsertCode('\n' + item.code);
                      }
                    },
                    item.title
                  );
                })
              )
            )
          )
        )
      ),
      _react2.default.createElement(
        _row2.default,
        { type: 'flex', justify: 'center', align: 'top' },
        _react2.default.createElement(
          _col2.default,
          { span: 5 },
          _react2.default.createElement(
            'h2',
            {
              className: 'interface-title',
              style: {
                display: 'inline-block',
                margin: '8px 20px 16px 0px'
              }
            },
            '\u6D4B\u8BD5\u96C6\u5408\xA0',
            _react2.default.createElement(
              'a',
              {
                target: '_blank',
                rel: 'noopener noreferrer',
                href: 'https://hellosean1025.github.io/yapi/documents/case.html'
              },
              _react2.default.createElement(
                _tooltip2.default,
                { title: '\u70B9\u51FB\u67E5\u770B\u6587\u6863' },
                _react2.default.createElement(_icon2.default, { type: 'question-circle-o' })
              )
            )
          )
        ),
        _react2.default.createElement(
          _col2.default,
          { span: 10 },
          _react2.default.createElement(_CaseEnv2.default, {
            envList: this.props.envList,
            currProjectEnvChange: this.currProjectEnvChange,
            envValue: this.state.currColEnvObj,
            collapseKey: this.state.collapseKey,
            changeClose: this.changeCollapseClose
          })
        ),
        _react2.default.createElement(
          _col2.default,
          { span: 9 },
          this.state.hasPlugin ? _react2.default.createElement(
            'div',
            {
              style: {
                float: 'right',
                paddingTop: '8px'
              }
            },
            this.props.curProjectRole !== 'guest' && _react2.default.createElement(
              _tooltip2.default,
              { title: '\u5728 YApi \u670D\u52A1\u7AEF\u8DD1\u81EA\u52A8\u5316\u6D4B\u8BD5\uFF0C\u6D4B\u8BD5\u73AF\u5883\u4E0D\u80FD\u4E3A\u79C1\u6709\u7F51\u7EDC\uFF0C\u8BF7\u786E\u4FDD YApi \u670D\u52A1\u5668\u53EF\u4EE5\u8BBF\u95EE\u5230\u81EA\u52A8\u5316\u6D4B\u8BD5\u73AF\u5883domain' },
              _react2.default.createElement(
                _button2.default,
                {
                  style: {
                    marginRight: '8px'
                  },
                  onClick: this.autoTests
                },
                '\u670D\u52A1\u7AEF\u6D4B\u8BD5'
              )
            ),
            _react2.default.createElement(
              _button2.default,
              { onClick: this.openCommonSetting, style: {
                  marginRight: '8px'
                } },
              '\u901A\u7528\u89C4\u5219\u914D\u7F6E'
            ),
            '\xA0',
            _react2.default.createElement(
              _button2.default,
              { type: 'primary', onClick: this.executeTests },
              '\u5F00\u59CB\u6D4B\u8BD5'
            )
          ) : _react2.default.createElement(
            _tooltip2.default,
            { title: '\u8BF7\u5B89\u88C5 cross-request Chrome \u63D2\u4EF6' },
            _react2.default.createElement(
              _button2.default,
              {
                disabled: true,
                type: 'primary',
                style: {
                  float: 'right',
                  marginTop: '8px'
                }
              },
              '\u5F00\u59CB\u6D4B\u8BD5'
            )
          )
        )
      ),
      _react2.default.createElement(
        'div',
        { className: 'component-label-wrapper' },
        _react2.default.createElement(_Label2.default, { onChange: function onChange(val) {
            return _this4.handleChangeInterfaceCol(val, col_name);
          }, desc: col_desc })
      ),
      _react2.default.createElement(
        Table.Provider,
        {
          components: components,
          columns: resolvedColumns,
          style: {
            width: '100%',
            borderCollapse: 'collapse'
          }
        },
        _react2.default.createElement(Table.Header, {
          className: 'interface-col-table-header',
          headerRows: resolve.headerRows({ columns: columns })
        }),
        _react2.default.createElement(Table.Body, {
          className: 'interface-col-table-body',
          rows: resolvedRows,
          rowKey: 'id',
          onRow: this.onRow
        })
      ),
      _react2.default.createElement(
        _modal2.default,
        {
          title: '\u6D4B\u8BD5\u62A5\u544A',
          width: '900px',
          style: {
            minHeight: '500px'
          },
          visible: this.state.visible,
          onCancel: this.handleCancel,
          footer: null
        },
        _react2.default.createElement(_CaseReport2.default, this.reports[this.state.curCaseid])
      ),
      _react2.default.createElement(
        _modal2.default,
        {
          title: '\u81EA\u5B9A\u4E49\u6D4B\u8BD5\u811A\u672C',
          width: '660px',
          style: {
            minHeight: '500px'
          },
          visible: this.state.advVisible,
          onCancel: this.handleAdvCancel,
          onOk: this.handleAdvOk,
          maskClosable: false
        },
        _react2.default.createElement(
          'h3',
          null,
          '\u662F\u5426\u5F00\u542F:\xA0',
          _react2.default.createElement(_switch2.default, {
            checked: this.state.enableScript,
            onChange: function onChange(e) {
              return _this4.setState({ enableScript: e });
            }
          })
        ),
        _react2.default.createElement(_AceEditor2.default, {
          className: 'case-script',
          data: this.state.curScript,
          onChange: this.handleScriptChange
        })
      ),
      this.state.autoVisible && _react2.default.createElement(
        _modal2.default,
        {
          title: '\u670D\u52A1\u7AEF\u81EA\u52A8\u5316\u6D4B\u8BD5',
          width: '780px',
          style: {
            minHeight: '500px'
          },
          visible: this.state.autoVisible,
          onCancel: this.handleAuto,
          className: 'autoTestsModal',
          footer: null
        },
        _react2.default.createElement(
          _row2.default,
          { type: 'flex', justify: 'space-around', className: 'row', align: 'top' },
          _react2.default.createElement(
            _col2.default,
            { span: 3, className: 'label', style: { paddingTop: '16px' } },
            '\u9009\u62E9\u73AF\u5883',
            _react2.default.createElement(
              _tooltip2.default,
              { title: '\u9ED8\u8BA4\u4F7F\u7528\u6D4B\u8BD5\u7528\u4F8B\u9009\u62E9\u7684\u73AF\u5883' },
              _react2.default.createElement(_icon2.default, { type: 'question-circle-o' })
            ),
            '\xA0\uFF1A'
          ),
          _react2.default.createElement(
            _col2.default,
            { span: 21 },
            _react2.default.createElement(_CaseEnv2.default, {
              envList: this.props.envList,
              currProjectEnvChange: this.currProjectEnvChange,
              envValue: this.state.currColEnvObj,
              collapseKey: this.state.collapseKey,
              changeClose: this.changeCollapseClose
            })
          )
        ),
        _react2.default.createElement(
          _row2.default,
          { type: 'flex', justify: 'space-around', className: 'row', align: 'middle' },
          _react2.default.createElement(
            _col2.default,
            { span: 3, className: 'label' },
            '\u8F93\u51FA\u683C\u5F0F\uFF1A'
          ),
          _react2.default.createElement(
            _col2.default,
            { span: 21 },
            _react2.default.createElement(
              _select2.default,
              { value: this.state.mode, onChange: this.modeChange },
              _react2.default.createElement(
                Option,
                { key: 'html', value: 'html' },
                'html'
              ),
              _react2.default.createElement(
                Option,
                { key: 'json', value: 'json' },
                'json'
              )
            )
          )
        ),
        _react2.default.createElement(
          _row2.default,
          { type: 'flex', justify: 'space-around', className: 'row', align: 'middle' },
          _react2.default.createElement(
            _col2.default,
            { span: 3, className: 'label' },
            '\u6D88\u606F\u901A\u77E5',
            _react2.default.createElement(
              _tooltip2.default,
              { title: '测试不通过时，会给项目组成员发送消息通知' },
              _react2.default.createElement(_icon2.default, {
                type: 'question-circle-o',
                style: {
                  width: '10px'
                }
              })
            ),
            '\xA0\uFF1A'
          ),
          _react2.default.createElement(
            _col2.default,
            { span: 21 },
            _react2.default.createElement(_switch2.default, {
              checked: this.state.email,
              checkedChildren: '\u5F00',
              unCheckedChildren: '\u5173',
              onChange: this.emailChange
            })
          )
        ),
        _react2.default.createElement(
          _row2.default,
          { type: 'flex', justify: 'space-around', className: 'row', align: 'middle' },
          _react2.default.createElement(
            _col2.default,
            { span: 3, className: 'label' },
            '\u4E0B\u8F7D\u6570\u636E',
            _react2.default.createElement(
              _tooltip2.default,
              { title: '开启后，测试数据将被下载到本地' },
              _react2.default.createElement(_icon2.default, {
                type: 'question-circle-o',
                style: {
                  width: '10px'
                }
              })
            ),
            '\xA0\uFF1A'
          ),
          _react2.default.createElement(
            _col2.default,
            { span: 21 },
            _react2.default.createElement(_switch2.default, {
              checked: this.state.download,
              checkedChildren: '\u5F00',
              unCheckedChildren: '\u5173',
              onChange: this.downloadChange
            })
          )
        ),
        _react2.default.createElement(
          _row2.default,
          { type: 'flex', justify: 'space-around', className: 'row', align: 'middle' },
          _react2.default.createElement(
            _col2.default,
            { span: 21, className: 'autoTestUrl' },
            _react2.default.createElement(
              'a',
              {
                target: '_blank',
                rel: 'noopener noreferrer',
                href: localUrl + autoTestsUrl },
              autoTestsUrl
            )
          ),
          _react2.default.createElement(
            _col2.default,
            { span: 3 },
            _react2.default.createElement(
              _button2.default,
              { className: 'copy-btn', onClick: function onClick() {
                  return _this4.copyUrl(localUrl + autoTestsUrl);
                } },
              '\u590D\u5236'
            )
          )
        ),
        _react2.default.createElement(
          'div',
          { className: 'autoTestMsg' },
          '\u6CE8\uFF1A\u8BBF\u95EE\u8BE5URL\uFF0C\u53EF\u4EE5\u6D4B\u8BD5\u6240\u6709\u7528\u4F8B\uFF0C\u8BF7\u786E\u4FDDYApi\u670D\u52A1\u5668\u53EF\u4EE5\u8BBF\u95EE\u5230\u73AF\u5883\u914D\u7F6E\u7684 domain'
        )
      )
    );
  };

  return InterfaceColContent;
}(_react.PureComponent), _class2.propTypes = {
  match: _propTypes2.default.object,
  interfaceColList: _propTypes2.default.array,
  fetchInterfaceColList: _propTypes2.default.func,
  fetchCaseList: _propTypes2.default.func,
  setColData: _propTypes2.default.func,
  history: _propTypes2.default.object,
  currCaseList: _propTypes2.default.array,
  currColId: _propTypes2.default.number,
  currCaseId: _propTypes2.default.number,
  isShowCol: _propTypes2.default.bool,
  isRander: _propTypes2.default.bool,
  currProject: _propTypes2.default.object,
  getToken: _propTypes2.default.func,
  token: _propTypes2.default.string,
  curProjectRole: _propTypes2.default.string,
  getEnv: _propTypes2.default.func,
  projectEnv: _propTypes2.default.object,
  fetchCaseEnvList: _propTypes2.default.func,
  envList: _propTypes2.default.array,
  curUid: _propTypes2.default.number
}, _temp)) || _class) || _class) || _class);
exports.default = InterfaceColContent;