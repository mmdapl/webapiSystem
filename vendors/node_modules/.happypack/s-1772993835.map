{"version":3,"sources":["common\\power-string.js"],"names":["aUniqueVerticalStringNotFoundInData","aUniqueCommaStringNotFoundInData","segmentSeparateChar","methodAndArgsSeparateChar","argsSeparateChar","md5","require","sha","Base64","stringHandles","str","arg","update","digest","sha1","sha224","sha256","sha384","sha512","base64","encode","unbase64","decode","substr","args","concat","forEach","item","lconcat","_string","lower","toLowerCase","upper","toUpperCase","length","number","isNaN","handleValue","_handleValue","replace","RegExp","PowerString","toString","addMethod","method","fn","prototype","unshift","apply","importMethods","handles","handleOriginStr","handleValueFn","split","map","handleSegment","reduce","execute","curItem","index","trim","indexOf","Error","module","exports","utils","filter"],"mappings":"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","file":"power-string.js","sourceRoot":"C:/Users/DUOYI/Desktop/api/test/vendors","sourcesContent":["/**\n * @author suxiaoxin\n */\n\nconst aUniqueVerticalStringNotFoundInData = '___UNIQUE_VERTICAL___';\nconst aUniqueCommaStringNotFoundInData = '___UNIQUE_COMMA___';\nconst segmentSeparateChar = '|';\nconst methodAndArgsSeparateChar = ':';\nconst argsSeparateChar = ',';\n\nconst md5 = require('md5');\nconst sha = require('sha.js');\nconst Base64 = require('js-base64').Base64;\n\nconst stringHandles = {\n  md5: function(str) {\n    return md5(str);\n  },\n\n  sha: function(str, arg) {\n    return sha(arg)\n      .update(str)\n      .digest('hex');\n  },\n\n  /**\n   * type: sha1 sha224 sha256 sha384 sha512\n   */\n  sha1: function(str) {\n    return sha('sha1')\n      .update(str)\n      .digest('hex');\n  },\n\n  sha224: function(str) {\n    return sha('sha224')\n      .update(str)\n      .digest('hex');\n  },\n\n  sha256: function(str) {\n    return sha('sha256')\n      .update(str)\n      .digest('hex');\n  },\n\n  sha384: function(str) {\n    return sha('sha384')\n      .update(str)\n      .digest('hex');\n  },\n\n  sha512: function(str) {\n    return sha('sha512')\n      .update(str)\n      .digest('hex');\n  },\n\n  base64: function(str) {\n    return Base64.encode(str);\n  },\n\n  unbase64: function(str) {\n    return Base64.decode(str);\n  },\n\n  substr: function(str, ...args) {\n    return str.substr(...args);\n  },\n\n  concat: function(str, ...args) {\n    args.forEach(item => {\n      str += item;\n    });\n    return str;\n  },\n\n  lconcat: function(str, ...args) {\n    args.forEach(item => {\n      str = item + this._string;\n    });\n    return str;\n  },\n\n  lower: function(str) {\n    return str.toLowerCase();\n  },\n\n  upper: function(str) {\n    return str.toUpperCase();\n  },\n\n  length: function(str) {\n    return str.length;\n  },\n\n  number: function(str) {\n    return !isNaN(str) ? +str : str;\n  }\n};\n\nlet handleValue = function(str) {\n  return str;\n};\n\nconst _handleValue = function(str) {\n  if (str[0] === str[str.length - 1] && (str[0] === '\"' || str[0] === \"'\")) {\n    str = str.substr(1, str.length - 2);\n  }\n  return handleValue(\n    str\n      .replace(new RegExp(aUniqueVerticalStringNotFoundInData, 'g'), segmentSeparateChar)\n      .replace(new RegExp(aUniqueCommaStringNotFoundInData, 'g'), argsSeparateChar)\n  );\n};\n\nclass PowerString {\n  constructor(str) {\n    this._string = str;\n  }\n\n  toString() {\n    return this._string;\n  }\n}\n\nfunction addMethod(method, fn) {\n  PowerString.prototype[method] = function(...args) {\n    args.unshift(this._string + '');\n    this._string = fn.apply(this, args);\n    return this;\n  };\n}\n\nfunction importMethods(handles) {\n  for (let method in handles) {\n    addMethod(method, handles[method]);\n  }\n}\n\nimportMethods(stringHandles);\n\nfunction handleOriginStr(str, handleValueFn) {\n  if (!str) return str;\n  if (typeof handleValueFn === 'function') {\n    handleValue = handleValueFn;\n  }\n  str = str\n    .replace('\\\\' + segmentSeparateChar, aUniqueVerticalStringNotFoundInData)\n    .replace('\\\\' + argsSeparateChar, aUniqueCommaStringNotFoundInData)\n    .split(segmentSeparateChar)\n    .map(handleSegment)\n    .reduce(execute, null)\n    .toString();\n  return str;\n}\n\nfunction execute(str, curItem, index) {\n  if (index === 0) {\n    return new PowerString(curItem);\n  }\n  return str[curItem.method].apply(str, curItem.args);\n}\n\nfunction handleSegment(str, index) {\n  str = str.trim();\n  if (index === 0) {\n    return _handleValue(str);\n  }\n\n  let method,\n    args = [];\n  if (str.indexOf(methodAndArgsSeparateChar) > 0) {\n    str = str.split(methodAndArgsSeparateChar);\n    method = str[0].trim();\n    args = str[1].split(argsSeparateChar).map(item => _handleValue(item.trim()));\n  } else {\n    method = str;\n  }\n  if (typeof stringHandles[method] !== 'function') {\n    throw new Error(`This method name(${method}) is not exist.`);\n  }\n\n  return {\n    method,\n    args\n  };\n}\n\nmodule.exports = {\n  utils: stringHandles,\n  PowerString,\n  /**\n   * 类似于 angularJs的 filter 功能\n   * @params string\n   * @params fn 处理参数值函数，默认是一个返回原有参数值函数\n   *\n   * @expamle\n   * filter('string | substr: 1, 10 | md5 | concat: hello ')\n   */\n  filter: handleOriginStr\n};\n"]}