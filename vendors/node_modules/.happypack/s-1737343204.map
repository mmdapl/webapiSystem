{"version":3,"sources":["client\\containers\\Group\\Group.js"],"names":["Content","Sider","TabPane","Group","curGroupId","state","group","currGroup","_id","curUserRole","user","role","curUserRoleInGroup","fetchNewsData","setCurrGroup","props","groupId","componentDidMount","axios","get","r","data","setState","e","console","error","render","GroupContent","minHeight","marginLeft","marginTop","height","margin","overflow","backgroundColor","type","indexOf","Component","propTypes","PropTypes","func","number","string","object"],"mappings":"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","file":"Group.js","sourceRoot":"C:/Users/DUOYI/Desktop/api/test/vendors","sourcesContent":["import React, { PureComponent as Component } from 'react';\nimport GroupList from './GroupList/GroupList.js';\nimport ProjectList from './ProjectList/ProjectList.js';\nimport MemberList from './MemberList/MemberList.js';\nimport GroupLog from './GroupLog/GroupLog.js';\nimport GroupSetting from './GroupSetting/GroupSetting.js';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { Route, Switch, Redirect } from 'react-router-dom';\nimport { Tabs, Layout, Spin } from 'antd';\nconst { Content, Sider } = Layout;\nconst TabPane = Tabs.TabPane;\nimport { fetchNewsData } from '../../reducer/modules/news.js';\nimport {\n  setCurrGroup\n} from '../../reducer/modules/group';\nimport './Group.scss';\nimport axios from 'axios'\n\n@connect(\n  state => {\n    return {\n      curGroupId: state.group.currGroup._id,\n      curUserRole: state.user.role,\n      curUserRoleInGroup: state.group.currGroup.role || state.group.role,\n      currGroup: state.group.currGroup\n    };\n  },\n  {\n    fetchNewsData: fetchNewsData,\n    setCurrGroup\n  }\n)\nexport default class Group extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      groupId: -1\n    }\n  }\n\n  async componentDidMount(){\n    let r = await axios.get('/api/group/get_mygroup')\n    try{\n      let group = r.data.data;\n      this.setState({\n        groupId: group._id\n      })\n      this.props.setCurrGroup(group)\n    }catch(e){\n      console.error(e)\n    }\n  }\n\n  static propTypes = {\n    fetchNewsData: PropTypes.func,\n    curGroupId: PropTypes.number,\n    curUserRole: PropTypes.string,\n    currGroup: PropTypes.object,\n    curUserRoleInGroup: PropTypes.string,\n    setCurrGroup: PropTypes.func\n  };\n  // onTabClick=(key)=> {\n  //   // if (key == 3) {\n  //   //   this.props.fetchNewsData(this.props.curGroupId, \"group\", 1, 10)\n  //   // }\n  // }\n  render() {\n    if(this.state.groupId === -1)return <Spin />\n    const GroupContent = (\n      <Layout style={{ minHeight: 'calc(100vh - 100px)', marginLeft: '24px', marginTop: '24px' }}>\n        <Sider style={{ height: '100%' }} width={300}>\n          <div className=\"logo\" />\n          <GroupList />\n        </Sider>\n        <Layout>\n          <Content\n            style={{\n              height: '100%',\n              margin: '0 24px 0 16px',\n              overflow: 'initial',\n              backgroundColor: '#fff'\n            }}\n          >\n            <Tabs type=\"card\" className=\"m-tab tabs-large\" style={{ height: '100%' }}>\n              <TabPane tab=\"项目列表\" key=\"1\">\n                <ProjectList />\n              </TabPane>\n              {this.props.currGroup.type === 'public' ? (\n                <TabPane tab=\"成员列表\" key=\"2\">\n                  <MemberList />\n                </TabPane>\n              ) : null}\n              {['admin', 'owner', 'guest', 'dev'].indexOf(this.props.curUserRoleInGroup) > -1 ||\n              this.props.curUserRole === 'admin' ? (\n                <TabPane tab=\"分组动态\" key=\"3\">\n                  <GroupLog />\n                </TabPane>\n              ) : (\n                ''\n              )}\n              {(this.props.curUserRole === 'admin' || this.props.curUserRoleInGroup === 'owner') &&\n              this.props.currGroup.type !== 'private' ? (\n                <TabPane tab=\"分组设置\" key=\"4\">\n                  <GroupSetting />\n                </TabPane>\n              ) : null}\n            </Tabs>\n          </Content>\n        </Layout>\n      </Layout>\n    );\n    return (\n      <div className=\"projectGround\">\n        <Switch>\n          <Redirect exact from=\"/group\" to={\"/group/\" + this.state.groupId} />\n          <Route path=\"/group/:groupId\" render={() => GroupContent} />\n        </Switch>\n      </div>\n    );\n  }\n}\n"]}