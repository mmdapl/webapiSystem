{"version":3,"sources":["client\\Application.js"],"names":["plugin","require","LOADING_STATUS","alertContent","ua","window","navigator","userAgent","isChrome","indexOf","chrome","zIndex","AppRoute","home","path","component","Home","group","Group","project","Project","user","User","follow","Follows","addProject","AddProject","login","Login","emitHook","App","loginState","state","curUserRole","role","checkLoginState","props","showConfirm","msg","callback","container","document","createElement","body","appendChild","ReactDOM","render","route","r","status","map","item","key","componentDidMount","Component","propTypes","PropTypes","func","number","string"],"mappings":"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","file":"Application.js","sourceRoot":"C:/Users/DUOYI/Desktop/api/test/vendors","sourcesContent":["import React, { PureComponent as Component } from 'react';\nimport ReactDOM from 'react-dom';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { Route, BrowserRouter as Router } from 'react-router-dom';\nimport { Home, Group, Project, Follows, AddProject, Login } from './containers/index';\nimport { Alert } from 'antd';\nimport User from './containers/User/User.js';\nimport Header from './components/Header/Header';\nimport Footer from './components/Footer/Footer';\nimport Loading from './components/Loading/Loading';\nimport MyPopConfirm from './components/MyPopConfirm/MyPopConfirm';\nimport { checkLoginState } from './reducer/modules/user';\nimport { requireAuthentication } from './components/AuthenticatedComponent';\nimport Notify from './components/Notify/Notify';\n\nconst plugin = require('client/plugin.js');\n\nconst LOADING_STATUS = 0;\n\nconst alertContent = () => {\n  const ua = window.navigator.userAgent,\n    isChrome = ua.indexOf('Chrome') && window.chrome;\n  if (!isChrome) {\n    return (\n      <Alert\n        style={{ zIndex: 99 }}\n        message={'YApi 的接口测试等功能仅支持 Chrome 浏览器，请使用 Chrome 浏览器获得完整功能。'}\n        banner\n        closable\n      />\n    );\n  }\n};\n\nlet AppRoute = {\n  home: {\n    path: '/',\n    component: Home\n  },\n  group: {\n    path: '/group',\n    component: Group\n  },\n  project: {\n    path: '/project/:id',\n    component: Project\n  },\n  user: {\n    path: '/user',\n    component: User\n  },\n  follow: {\n    path: '/follow',\n    component: Follows\n  },\n  addProject: {\n    path: '/add-project',\n    component: AddProject\n  },\n  login: {\n    path: '/login',\n    component: Login\n  }\n};\n// 增加路由钩子\nplugin.emitHook('app_route', AppRoute);\n\n@connect(\n  state => {\n    return {\n      loginState: state.user.loginState,\n      curUserRole: state.user.role\n    };\n  },\n  {\n    checkLoginState\n  }\n)\nexport default class App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      login: LOADING_STATUS\n    };\n  }\n\n  static propTypes = {\n    checkLoginState: PropTypes.func,\n    loginState: PropTypes.number,\n    curUserRole: PropTypes.string\n  };\n\n  componentDidMount() {\n    this.props.checkLoginState();\n  }\n\n  showConfirm = (msg, callback) => {\n    // 自定义 window.confirm\n    // http://reacttraining.cn/web/api/BrowserRouter/getUserConfirmation-func\n    let container = document.createElement('div');\n    document.body.appendChild(container);\n    ReactDOM.render(<MyPopConfirm msg={msg} callback={callback} />, container);\n  };\n\n  route = status => {\n    let r;\n    if (status === LOADING_STATUS) {\n      return <Loading visible />;\n    } else {\n      r = (\n        <Router getUserConfirmation={this.showConfirm}>\n          <div className=\"g-main\">\n            <div className=\"router-main\">\n              {this.props.curUserRole === 'admin' && <Notify />}\n              {alertContent()}\n              {this.props.loginState !== 1 ? <Header /> : null}\n              <div className=\"router-container\">\n                {Object.keys(AppRoute).map(key => {\n                  let item = AppRoute[key];\n                  return key === 'login' ? (\n                    <Route key={key} path={item.path} component={item.component} />\n                  ) : key === 'home' ? (\n                    <Route key={key} exact path={item.path} component={item.component} />\n                  ) : (\n                    <Route\n                      key={key}\n                      path={item.path}\n                      component={requireAuthentication(item.component)}\n                    />\n                  );\n                })}\n              </div>\n              {/* <div className=\"router-container\">\n                <Route exact path=\"/\" component={Home} />\n                <Route path=\"/group\" component={requireAuthentication(Group)} />\n                <Route path=\"/project/:id\" component={requireAuthentication(Project)} />\n                <Route path=\"/user\" component={requireAuthentication(User)} />\n                <Route path=\"/follow\" component={requireAuthentication(Follows)} />\n                <Route path=\"/add-project\" component={requireAuthentication(AddProject)} />\n                <Route path=\"/login\" component={Login} />\n                {/* <Route path=\"/statistic\" component={statisticsPage} /> */}\n              {/* </div> */}\n            </div>\n            <Footer />\n          </div>\n        </Router>\n      );\n    }\n    return r;\n  };\n\n  render() {\n    return this.route(this.props.loginState);\n  }\n}\n"]}