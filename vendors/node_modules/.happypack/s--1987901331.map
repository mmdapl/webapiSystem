{"version":3,"sources":["client\\containers\\Project\\Setting\\ProjectRequest\\ProjectRequest.js"],"names":["FormItem","Item","ProjectRequest","projectMsg","state","project","currProject","updateProjectScript","getProject","create","handleSubmit","props","id","projectId","pre_script","after_script","result","payload","data","errcode","success","errmsg","componentWillMount","setState","render","formItemLayout","labelCol","xs","span","sm","wrapperCol","tailFormItemLayout","offset","editor","text","Component","propTypes","PropTypes","object","func","number"],"mappings":"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","file":"ProjectRequest.js","sourceRoot":"C:/Users/DUOYI/Desktop/api/test/vendors","sourcesContent":["import React, { PureComponent as Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { Form, Button, message } from 'antd';\nconst FormItem = Form.Item;\nimport './project-request.scss';\nimport AceEditor from 'client/components/AceEditor/AceEditor';\nimport { updateProjectScript, getProject } from '../../../../reducer/modules/project';\n\n@connect(\n  state => {\n    return {\n      projectMsg: state.project.currProject\n    };\n  },\n  {\n    updateProjectScript,\n    getProject\n  }\n)\n@Form.create()\nexport default class ProjectRequest extends Component {\n  static propTypes = {\n    projectMsg: PropTypes.object,\n    updateProjectScript: PropTypes.func,\n    getProject: PropTypes.func,\n    projectId: PropTypes.number\n  };\n\n  componentWillMount() {\n    this.setState({\n      pre_script: this.props.projectMsg.pre_script,\n      after_script: this.props.projectMsg.after_script\n    });\n  }\n\n  handleSubmit = async () => {\n    let result = await this.props.updateProjectScript({\n      id: this.props.projectId,\n      pre_script: this.state.pre_script,\n      after_script: this.state.after_script\n    });\n    if (result.payload.data.errcode === 0) {\n      message.success('保存成功');\n      await this.props.getProject(this.props.projectId);\n    } else {\n      message.success('保存失败, ' + result.payload.data.errmsg);\n    }\n  };\n\n  render() {\n    const formItemLayout = {\n      labelCol: {\n        xs: { span: 24 },\n        sm: { span: 6 }\n      },\n      wrapperCol: {\n        xs: { span: 24 },\n        sm: { span: 16 }\n      }\n    };\n\n    const tailFormItemLayout = {\n      wrapperCol: {\n        xs: {\n          span: 24,\n          offset: 0\n        },\n        sm: {\n          span: 16,\n          offset: 8\n        }\n      }\n    };\n\n    const { pre_script, after_script } = this.state;\n\n    return (\n      <div className=\"project-request\">\n        <Form onSubmit={this.handleSubmit}>\n          <FormItem {...formItemLayout} label=\"Pre-request Script(请求参数处理脚本)\">\n            <AceEditor\n              data={pre_script}\n              onChange={editor => this.setState({ pre_script: editor.text })}\n              fullScreen={true}\n              className=\"request-editor\"\n            />\n          </FormItem>\n          <FormItem {...formItemLayout} label=\"Pre-response Script(响应数据处理脚本)\">\n            <AceEditor\n              data={after_script}\n              onChange={editor => this.setState({ after_script: editor.text })}\n              fullScreen={true}\n              className=\"request-editor\"\n            />\n          </FormItem>\n          <FormItem {...tailFormItemLayout}>\n            <Button onClick={this.handleSubmit} type=\"primary\">\n              保存\n            </Button>\n          </FormItem>\n        </Form>\n      </div>\n    );\n  }\n}\n"]}