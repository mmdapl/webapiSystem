{"version":3,"sources":["client\\containers\\Project\\Setting\\ProjectEnv\\ProjectEnvContent.js"],"names":["FormItem","Item","Option","initMap","header","name","value","cookie","global","ProjectEnvContent","initState","curdata","curheader","curGlobal","length","forEach","item","cookieStr","split","c","unshift","trim","props","addHeader","index","nextHeader","state","newValue","data","concat","setState","delHeader","key","curValue","form","getFieldValue","filter","val","setFieldsValue","handleOk","e","preventDefault","onSubmit","projectMsg","validateFields","err","values","push","map","join","assignValue","env","_id","domain","protocol","handleInit","resetFields","componentWillReceiveProps","nextProps","curEnvName","nextEnvName","render","getFieldDecorator","headerTpl","headerLength","validateTrigger","initialValue","width","constants","HTTP_REQUEST_HEADER","inputValue","option","children","toUpperCase","indexOf","marginRight","stopPropagation","commonTpl","envTpl","rules","required","whitespace","validator","rule","callback","test","handleEnvInput","target","marginLeft","fontSize","Component","propTypes","PropTypes","object","func","create"],"mappings":"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","file":"ProjectEnvContent.js","sourceRoot":"C:/Users/DUOYI/Desktop/api/test/vendors","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport './index.scss';\nimport { Icon, Row, Col, Form, Input, Select, Button, AutoComplete, Tooltip } from 'antd';\nconst FormItem = Form.Item;\nconst Option = Select.Option;\nimport constants from 'client/constants/variable.js';\n\nconst initMap = {\n  header: [\n    {\n      name: '',\n      value: ''\n    }\n  ],\n  cookie: [\n    {\n      name: '',\n      value: ''\n    }\n  ],\n  global: [\n    {\n      name: '',\n      value: ''\n    }\n  ]\n};\n\nclass ProjectEnvContent extends Component {\n  static propTypes = {\n    projectMsg: PropTypes.object,\n    form: PropTypes.object,\n    onSubmit: PropTypes.func,\n    handleEnvInput: PropTypes.func\n  };\n\n  initState(curdata) {\n    let header = [\n      {\n        name: '',\n        value: ''\n      }\n    ];\n    let cookie = [\n      {\n        name: '',\n        value: ''\n      }\n    ];\n\n    let global = [\n      {\n        name: '',\n        value: ''\n      }\n    ];\n\n    const curheader = curdata.header;\n    const curGlobal = curdata.global;\n\n    if (curheader && curheader.length !== 0) {\n      curheader.forEach(item => {\n        if (item.name === 'Cookie') {\n          let cookieStr = item.value;\n          if (cookieStr) {\n            cookieStr = cookieStr.split(';').forEach(c => {\n              if (c) {\n                c = c.split('=');\n                cookie.unshift({\n                  name: c[0] ? c[0].trim() : '',\n                  value: c[1] ? c[1].trim() : ''\n                });\n              }\n            });\n          }\n        } else {\n          header.unshift(item);\n        }\n      });\n    }\n\n    if (curGlobal && curGlobal.length !== 0) {\n      curGlobal.forEach(item => {\n        global.unshift(item);\n      });\n    }\n    return { header, cookie, global };\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = Object.assign({}, initMap);\n  }\n  addHeader = (value, index, name) => {\n    let nextHeader = this.state[name][index + 1];\n    if (nextHeader && typeof nextHeader === 'object') {\n      return;\n    }\n    let newValue = {};\n    let data = { name: '', value: '' };\n    newValue[name] = [].concat(this.state[name], data);\n    this.setState(newValue);\n  };\n\n  delHeader = (key, name) => {\n    let curValue = this.props.form.getFieldValue(name);\n    let newValue = {};\n    newValue[name] = curValue.filter((val, index) => {\n      return index !== key;\n    });\n    this.props.form.setFieldsValue(newValue);\n    this.setState(newValue);\n  };\n\n  handleInit(data) {\n    this.props.form.resetFields();\n    let newValue = this.initState(data);\n    this.setState({ ...newValue });\n  }\n\n  componentWillReceiveProps(nextProps) {\n    let curEnvName = this.props.projectMsg.name;\n    let nextEnvName = nextProps.projectMsg.name;\n    if (curEnvName !== nextEnvName) {\n      this.handleInit(nextProps.projectMsg);\n    }\n  }\n\n  handleOk = e => {\n    e.preventDefault();\n    const { form, onSubmit, projectMsg } = this.props;\n    form.validateFields((err, values) => {\n      if (!err) {\n        let header = values.header.filter(val => {\n          return val.name !== '';\n        });\n        let cookie = values.cookie.filter(val => {\n          return val.name !== '';\n        });\n        let global = values.global.filter(val => {\n          return val.name !== '';\n        });\n        if (cookie.length > 0) {\n          header.push({\n            name: 'Cookie',\n            value: cookie.map(item => item.name + '=' + item.value).join(';')\n          });\n        }\n        let assignValue = {};\n        assignValue.env = Object.assign(\n          { _id: projectMsg._id },\n          {\n            name: values.env.name,\n            domain: values.env.protocol + values.env.domain,\n            header: header,\n            global\n          }\n        );\n        onSubmit(assignValue);\n      }\n    });\n  };\n\n  render() {\n    const { projectMsg } = this.props;\n    const { getFieldDecorator } = this.props.form;\n    const headerTpl = (item, index) => {\n      const headerLength = this.state.header.length - 1;\n      return (\n        <Row gutter={2} key={index}>\n          <Col span={10}>\n            <FormItem>\n              {getFieldDecorator('header[' + index + '].name', {\n                validateTrigger: ['onChange', 'onBlur'],\n                initialValue: item.name || ''\n              })(\n                <AutoComplete\n                  style={{ width: '200px' }}\n                  allowClear={true}\n                  dataSource={constants.HTTP_REQUEST_HEADER}\n                  placeholder=\"请输入header名称\"\n                  onChange={() => this.addHeader(item, index, 'header')}\n                  filterOption={(inputValue, option) =>\n                    option.props.children.toUpperCase().indexOf(inputValue.toUpperCase()) !== -1\n                  }\n                />\n              )}\n            </FormItem>\n          </Col>\n          <Col span={12}>\n            <FormItem>\n              {getFieldDecorator('header[' + index + '].value', {\n                validateTrigger: ['onChange', 'onBlur'],\n                initialValue: item.value || ''\n              })(<Input placeholder=\"请输入参数内容\" style={{ width: '90%', marginRight: 8 }} />)}\n            </FormItem>\n          </Col>\n          <Col span={2} className={index === headerLength ? ' env-last-row' : null}>\n            {/* 新增的项中，只有最后一项没有有删除按钮 */}\n            <Icon\n              className=\"dynamic-delete-button delete\"\n              type=\"delete\"\n              onClick={e => {\n                e.stopPropagation();\n                this.delHeader(index, 'header');\n              }}\n            />\n          </Col>\n        </Row>\n      );\n    };\n\n    const commonTpl = (item, index, name) => {\n      const length = this.state[name].length - 1;\n      return (\n        <Row gutter={2} key={index}>\n          <Col span={10}>\n            <FormItem>\n              {getFieldDecorator(`${name}[${index}].name`, {\n                validateTrigger: ['onChange', 'onBlur'],\n                initialValue: item.name || ''\n              })(\n                <Input\n                  placeholder={`请输入 ${name} Name`}\n                  style={{ width: '200px' }}\n                  onChange={() => this.addHeader(item, index, name)}\n                />\n              )}\n            </FormItem>\n          </Col>\n          <Col span={12}>\n            <FormItem>\n              {getFieldDecorator(`${name}[${index}].value`, {\n                validateTrigger: ['onChange', 'onBlur'],\n                initialValue: item.value || ''\n              })(<Input placeholder=\"请输入参数内容\" style={{ width: '90%', marginRight: 8 }} />)}\n            </FormItem>\n          </Col>\n          <Col span={2} className={index === length ? ' env-last-row' : null}>\n            {/* 新增的项中，只有最后一项没有有删除按钮 */}\n            <Icon\n              className=\"dynamic-delete-button delete\"\n              type=\"delete\"\n              onClick={e => {\n                e.stopPropagation();\n                this.delHeader(index, name);\n              }}\n            />\n          </Col>\n        </Row>\n      );\n    };\n\n    const envTpl = data => {\n      return (\n        <div>\n          <h3 className=\"env-label\">环境名称</h3>\n          <FormItem required={false}>\n            {getFieldDecorator('env.name', {\n              validateTrigger: ['onChange', 'onBlur'],\n              initialValue: data.name === '新环境' ? '' : data.name || '',\n              rules: [\n                {\n                  required: false,\n                  whitespace: true,\n                  validator(rule, value, callback) {\n                    if (value) {\n                      if (value.length === 0) {\n                        callback('请输入环境名称');\n                      } else if (!/\\S/.test(value)) {\n                        callback('请输入环境名称');\n                      } else {\n                        return callback();\n                      }\n                    } else {\n                      callback('请输入环境名称');\n                    }\n                  }\n                }\n              ]\n            })(\n              <Input\n                onChange={e => this.props.handleEnvInput(e.target.value)}\n                placeholder=\"请输入环境名称\"\n                style={{ width: '90%', marginRight: 8 }}\n              />\n            )}\n          </FormItem>\n          <h3 className=\"env-label\">环境域名</h3>\n          <FormItem required={false}>\n            {getFieldDecorator('env.domain', {\n              validateTrigger: ['onChange', 'onBlur'],\n              initialValue: data.domain ? data.domain.split('//')[1] : '',\n              rules: [\n                {\n                  required: false,\n                  whitespace: true,\n                  validator(rule, value, callback) {\n                    if (value) {\n                      if (value.length === 0) {\n                        callback('请输入环境域名!');\n                      } else if (/\\s/.test(value)) {\n                        callback('环境域名不允许出现空格!');\n                      } else {\n                        return callback();\n                      }\n                    } else {\n                      callback('请输入环境域名!');\n                    }\n                  }\n                }\n              ]\n            })(\n              <Input\n                placeholder=\"请输入环境域名\"\n                style={{ width: '90%', marginRight: 8 }}\n                addonBefore={getFieldDecorator('env.protocol', {\n                  initialValue: data.domain ? data.domain.split('//')[0] + '//' : 'http://',\n                  rules: [\n                    {\n                      required: true\n                    }\n                  ]\n                })(\n                  <Select>\n                    <Option value=\"http://\">{'http://'}</Option>\n                    <Option value=\"https://\">{'https://'}</Option>\n                  </Select>\n                )}\n              />\n            )}\n          </FormItem>\n          <h3 className=\"env-label\">Header</h3>\n          {this.state.header.map((item, index) => {\n            return headerTpl(item, index);\n          })}\n\n          <h3 className=\"env-label\">Cookie</h3>\n          {this.state.cookie.map((item, index) => {\n            return commonTpl(item, index, 'cookie');\n          })}\n\n          <h3 className=\"env-label\">\n            global\n            <a\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              href=\"https://hellosean1025.github.io/yapi/documents/project.html#%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83\"\n              style={{ marginLeft: 8 }}\n            >\n              <Tooltip title=\"点击查看文档\">\n                <Icon type=\"question-circle-o\" style={{fontSize: '13px'}}/>\n              </Tooltip>\n            </a>\n          </h3>\n          {this.state.global.map((item, index) => {\n            return commonTpl(item, index, 'global');\n          })}\n        </div>\n      );\n    };\n\n    return (\n      <div>\n        {envTpl(projectMsg)}\n        <div className=\"btnwrap-changeproject\">\n          <Button\n            className=\"m-btn btn-save\"\n            icon=\"save\"\n            type=\"primary\"\n            size=\"large\"\n            onClick={this.handleOk}\n          >\n            保 存\n          </Button>\n        </div>\n      </div>\n    );\n  }\n}\nexport default Form.create()(ProjectEnvContent);\n"]}