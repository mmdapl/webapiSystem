{"version":3,"sources":["client\\common.js"],"names":["moment","require","constants","Mock","json5","MockExtra","Roles","roleAction","manageUserlist","changeMemberRole","editInterface","viewPrivateInterface","viewGroup","isJson","json","JSON","parse","e","exports","isJson5","safeArray","arr","Array","isArray","json5_parse","err","json_parse","deepCopyJson","checkAuth","action","role","formatTime","unix","timestamp","format","debounce","func","wait","timeout","clearTimeout","setTimeout","pickRandomProperty","result","count","prop","obj","Math","random","getImgPath","path","type","rate","window","devicePixelRatio","trim","str","replace","handlePath","length","substr","handleApiPath","nameLengthLimit","strLength","i","charCodeAt","required","validator","rule","value","callback","len","NAME_LIMIT","htmlFilter","reg","html","entries","res","key","push","getMockText","mock","mockTpl","safeAssign","Obj","nextObj","keys","reduce","indexOf","arrayChangeIndex","start","end","newArr","concat","startItem","splice","changes","forEach","item","index","id","_id"],"mappings":"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","file":"common.js","sourceRoot":"C:/Users/DUOYI/Desktop/api/test/vendors","sourcesContent":["const moment = require('moment');\nconst constants = require('./constants/variable');\nconst Mock = require('mockjs');\nconst json5 = require('json5');\nconst MockExtra = require('common/mock-extra.js');\n\nconst Roles = {\n  0: 'admin',\n  10: 'owner',\n  20: 'dev',\n  30: 'guest',\n  40: 'member'\n};\n\nconst roleAction = {\n  manageUserlist: 'admin',\n  changeMemberRole: 'owner',\n  editInterface: 'dev',\n  viewPrivateInterface: 'guest',\n  viewGroup: 'guest'\n};\n\nfunction isJson(json) {\n  if (!json) {\n    return false;\n  }\n  try {\n    json = JSON.parse(json);\n    return json;\n  } catch (e) {\n    return false;\n  }\n}\n\nexports.isJson = isJson;\n\nfunction isJson5(json) {\n  if (!json) {\n    return false;\n  }\n  try {\n    json = json5.parse(json);\n    return json;\n  } catch (e) {\n    return false;\n  }\n}\nexports.safeArray = function(arr) {\n  return Array.isArray(arr) ? arr : [];\n};\n\nexports.json5_parse = function(json) {\n  try {\n    return json5.parse(json);\n  } catch (err) {\n    return json;\n  }\n};\n\nexports.json_parse = function(json) {\n  try {\n    return JSON.parse(json);\n  } catch (err) {\n    return json;\n  }\n};\n\nfunction deepCopyJson(json) {\n  return JSON.parse(JSON.stringify(json));\n}\n\nexports.deepCopyJson = deepCopyJson;\n\nexports.isJson5 = isJson5;\n\nexports.checkAuth = (action, role) => {\n  return Roles[roleAction[action]] <= Roles[role];\n};\n\nexports.formatTime = timestamp => {\n  return moment.unix(timestamp).format('YYYY-MM-DD HH:mm:ss');\n};\n\n// 防抖函数，减少高频触发的函数执行的频率\n// 请在 constructor 里使用:\n// import { debounce } from '$/common';\n// this.func = debounce(this.func, 400);\nexports.debounce = (func, wait) => {\n  let timeout;\n  return function() {\n    clearTimeout(timeout);\n    timeout = setTimeout(func, wait);\n  };\n};\n\n// 从 Javascript 对象中选取随机属性\nexports.pickRandomProperty = obj => {\n  let result;\n  let count = 0;\n  for (let prop in obj) {\n    if (Math.random() < 1 / ++count) {\n      result = prop;\n    }\n  }\n  return result;\n};\n\nexports.getImgPath = (path, type) => {\n  let rate = window.devicePixelRatio >= 2 ? 2 : 1;\n  return `${path}@${rate}x.${type}`;\n};\n\nfunction trim(str) {\n  if (!str) {\n    return str;\n  }\n\n  str = str + '';\n\n  return str.replace(/(^\\s*)|(\\s*$)/g, '');\n}\n\nexports.trim = trim;\n\nexports.handlePath = path => {\n  path = trim(path);\n  if (!path) {\n    return path;\n  }\n  if (path === '/') {\n    return '';\n  }\n  path = path[0] !== '/' ? '/' + path : path;\n  path = path[path.length - 1] === '/' ? path.substr(0, path.length - 1) : path;\n  return path;\n};\n\nexports.handleApiPath = path => {\n  if (!path) {\n    return '';\n  }\n  path = trim(path);\n  path = path[0] !== '/' ? '/' + path : path;\n  return path;\n};\n\n// 名称限制 constants.NAME_LIMIT 字符\nexports.nameLengthLimit = type => {\n  // 返回字符串长度，汉字计数为2\n  const strLength = str => {\n    let length = 0;\n    for (let i = 0; i < str.length; i++) {\n      str.charCodeAt(i) > 255 ? (length += 2) : length++;\n    }\n    return length;\n  };\n  // 返回 form中的 rules 校验规则\n  return [\n    {\n      required: true,\n      validator(rule, value, callback) {\n        const len = value ? strLength(value) : 0;\n        if (len > constants.NAME_LIMIT) {\n          callback(\n            '请输入' + type + '名称，长度不超过' + constants.NAME_LIMIT + '字符(中文算作2字符)!'\n          );\n        } else if (len === 0) {\n          callback(\n            '请输入' + type + '名称，长度不超过' + constants.NAME_LIMIT + '字符(中文算作2字符)!'\n          );\n        } else {\n          return callback();\n        }\n      }\n    }\n  ];\n};\n\n// 去除所有html标签只保留文字\n\nexports.htmlFilter = html => {\n  let reg = /<\\/?.+?\\/?>/g;\n  return html.replace(reg, '') || '新项目';\n};\n\n// 实现 Object.entries() 方法\nexports.entries = obj => {\n  let res = [];\n  for (let key in obj) {\n    res.push([key, obj[key]]);\n  }\n  return res;\n};\n\nexports.getMockText = mockTpl => {\n  try {\n    return JSON.stringify(Mock.mock(MockExtra(json5.parse(mockTpl), {})), null, '  ');\n  } catch (err) {\n    return '';\n  }\n};\n/**\n * 合并后新的对象属性与 Obj 一致，nextObj 有对应属性则取 nextObj 属性值，否则取 Obj 属性值\n * @param  {Object} Obj     旧对象\n * @param  {Object} nextObj 新对象\n * @return {Object}           合并后的对象\n */\nexports.safeAssign = (Obj, nextObj) => {\n  let keys = Object.keys(nextObj);\n  return Object.keys(Obj).reduce((result, value) => {\n    if (keys.indexOf(value) >= 0) {\n      result[value] = nextObj[value];\n    } else {\n      result[value] = Obj[value];\n    }\n    return result;\n  }, {});\n};\n\n// 交换数组的位置\nexports.arrayChangeIndex = (arr, start, end) => {\n  let newArr = [].concat(arr);\n  // newArr[start] = arr[end];\n  // newArr[end] = arr[start];\n  let startItem = newArr[start];\n  newArr.splice(start, 1);\n  // end自动加1\n  newArr.splice(end, 0, startItem);\n  let changes = [];\n  newArr.forEach((item, index) => {\n    changes.push({\n      id: item._id,\n      index: index\n    });\n  });\n\n  return changes;\n};\n"]}